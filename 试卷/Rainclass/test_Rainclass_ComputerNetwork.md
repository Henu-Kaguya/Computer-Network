## 第1次课测试

### 1. [填空题]

（选择以下术语填空：路由器、主机、分组交换、电路交换、存储转发、独占信道）

网络中数据交换的三种方式是 **[填空1]** 、报文交换和 **[填空2]** 。互联网核心部分采用的是基于 **[填空3]** 技术的 **[填空4]** 方式，其优点是高效、灵活、迅速、可靠。互联网核心部分的分组转发是由 **[填空5]** 完成的。

**答案**：

[1] 电路交换 / 分组交换
[2] 电路交换 / 分组交换
[3] 存储转发
[4] 分组交换
[5] 路由器

> **解析：**
>
> 网络中数据交换的三种主要方式是电路交换、报文交换和分组交换。
> 互联网的核心部分采用了基于**存储转发**技术的**分组交换**方式。
> 分组交换的优点包括高效、灵活、迅速和可靠。
> 在互联网核心部分，**路由器**负责将收到的分组进行存储转发，完成数据传输。

---

### 2. [单选题]

分组交换比电路交换的传输速度快，对吗？

C. 不一定

B. 不对

A. 对

**答案**：C

> **解析：**
>
> 分组交换和电路交换的传输速度取决于具体情况。
> 1.  电路交换需要建立连接，建立连接的时间较长，但建立后传输时延小且稳定。适合大数据量、长时间的实时通信。
> 2.  分组交换不需要建立连接，但每个节点需要进行存储转发，会产生排队时延。适合突发性的数据传输。
> 因此，不能简单地说分组交换比电路交换快，要看具体的数据量、网络负载和链路情况。所以选C。

---

### 3. [单选题]

以下哪项不属于计算机网络向用户提供的资源共享。

B. 软件共享

D. 线路共享

A. 信息共享

C. 硬件共享

**答案**：D

> **解析：**
>
> 计算机网络向用户提供的资源共享主要包括：
> 1.  **硬件共享**：如打印机、服务器、存储设备等。
> 2.  **软件共享**：如各种应用软件、工具软件等。
> 3.  **信息共享**（数据共享）：如数据库、文档资料等。
>
> 线路共享（或信道复用）是数据通信中的技术手段，用于提高通信线路的利用率，但不通常作为面向用户提供的“资源共享”类别来描述。因此选D。

---

### 4. [填空题]

互联网具有的两个重要基本特点是 **[填空1]** 和 **[填空2]** 。

**答案**：

[1] 连通性
[2] 共享

> **解析：**
>
> 互联网具有的两个最重要、最基本特点是：
> 1.  **连通性 (Connectivity)**：互联网使上网用户之间可以交换信息，好像用户的计算机终端彼此连在了一起。
> 2.  **共享 (Sharing)**：指资源共享，包括信息共享、软件共享和硬件共享。

---

### 5. [填空题]

在互联网边缘部分，端系统之间的两种通信方式分别是 **[填空1]** 方式和 **[填空2]** 方式。

**答案**：

[1] 客户-服务器 / C/S
[2] 对等 / P2P

> **解析：**
>
> 在互联网的边缘部分，端系统之间的通信方式主要有两大类：
> 1.  **客户-服务器方式 (Client-Server, C/S)**：最常见的通信方式，客户是服务的请求方，服务器是服务的提供方。
> 2.  **对等方式 (Peer-to-Peer, P2P)**：两台主机在通信时并不区分哪一个是服务请求方哪一个是服务提供方，只要两个主机都运行了对等连接软件，它们就可以进行平等的、对等连接通信。

---

### 6. [单选题]

以下说法，哪个是不正确的。

C. 因特网的英文是Internet。

D. 因特网的前身是美国的 ARPANET。

A. 因特网是单个计算机网络。

B. 因特网是一个互连网络。

**答案**：A

> **解析：**
>
> A 错误：因特网（Internet）不是单个计算机网络，而是由许多计算机网络互相连接而成的“网络的网络”（Interconnected Network）。
> B 正确：因特网是一个全球性的互连网络。
> C 正确：英文名称为 Internet。
> D 正确：因特网的前身是 1969 年诞生的 ARPANET。

---

## 第2次课测试

### 1. [单选题]

上网时，感觉网络时快时慢，主要是哪种时延引起的？

A. 发送时延

B. 传播时延

C. 处理时延

D. 排队时延

**答案**：D

> **解析：**
>
> 网络时延由四部分组成：发送时延、传播时延、处理时延和排队时延。
> 其中发送时延、传播时延、处理时延通常是相对固定的或变化较小。
> **排队时延**取决于网络当前的通信量（负载）。当网络负载重时，分组在路由器的队列中等待处理的时间就会变长；负载轻时，等待时间就短。因此，网络时快时慢主要是由排队时延的变化引起的。

---

### 2. [单选题]

“带宽”的变化将会改变以下哪种时延？

A. 发送时延

B. 传播时延

C. 处理时延

D. 排队时延

**答案**：A

> **解析：**
>
> **发送时延**（传输时延） = 数据帧长度 / 发送速率（带宽）。
> 因此，提高网络带宽（即提高发送速率）会直接减小发送时延。
> 传播时延取决于介质和距离；处理时延和排队时延取决于路由器性能和网络负载，与链路带宽无直接公式关系。

---

### 3. [填空题]

假定网络的利用率达到了90%。则当前的网络时延是它的最小值的 **[填空1]** 倍。

**答案**：

[1] 10

> **解析：**
>
> 根据排队论公式：$D = \frac{D_0}{1 - U}$
> 其中 $D$ 是当前时延，$D_0$ 是网络空闲时的时延（最小时延），$U$ 是网络利用率。
> 当 $U = 90\% = 0.9$ 时：
> $D = \frac{D_0}{1 - 0.9} = \frac{D_0}{0.1} = 10 D_0$
> 所以当前时延是最小值的 10 倍。

---

### 4. [填空题]

选择相应式子的序号填空：1. kd+x/b+s；2. kd+(x/p)*p/b+(k-1)*p/b；3. kd；4. x/b；5. k*p/b；6. kd+(x/p)*(p+h)/b+(k-1)*(p+h)/b；7. (x/p)*(p+h)/b+(k-1)*(p+h)/b；8. s>(k-1)*(p/b)；9. s>k*(p/b)。

试在下列条件下比较电路交换和分组交换。要传送的报文共x（bit）。从源点到终点共经过k段链路，每段链路的传播时延为d（s），数据率为b(b/s)。在电路交换时电路的建立时间为s(s)。在分组交换时分组长度为p(bit)，且各结点的排队等待时间可忽略不计。问：电路交换的时延是 **[填空1]** ；分组交换的时延是 **[填空2]** ；在 **[填空3]** (x>>p)条件下，分组交换的时延比电路交换的时延小。

**答案**：

[1] 1
[2] 2
[3] 8

> **解析：**
>
> 1.  **电路交换时延**：建立连接时间 $s$ + 发送时延 $x/b$ + 传播时延 $k \times d$。
>     即：$s + x/b + kd$。对应选项 **1**。
> 2.  **分组交换时延**：
>     源节点发送所有数据的时间：$x/b$ (即 $(x/p) \times p/b$)
>     最后一个分组经过中间 $k-1$ 个路由器的转发时延：$(k-1) \times p/b$
>     所有链路的传播时延：$k \times d$
>     总时延：$x/b + (k-1)p/b + kd$。对应选项 **2**。
> 3.  **比较**：
>     若分组交换时延 < 电路交换时延：
>     $kd + x/b + (k-1)p/b < kd + x/b + s$
>     $(k-1)p/b < s$
>     即 $s > (k-1)(p/b)$。对应选项 **8**。

---

### 5. [填空题]

选择相应式子的序号填空：1. kd+x/b+s；2. kd+(x/p)*p/b+(k-1)*p/b；3. kd；4. x/b；5. k*p/b；6. kd+(x/p)*(p+h)/b+(k-1)*(p+h)/b；7. (x/p)*(p+h)/b+(k-1)*(p+h)/b；8. s>(k-1)*(p/b)；9. s>k*(p/b)。

若上题条件中，分组长度为p+h(bit),其中p为分组的数据部分的长度，h为每个分组所带的控制信息固定长度，与p的大小无关；其他条件不变。则分组交换的发送时延是 **[填空1]** ，传播时延是 **[填空2]** ，总时延是 **[填空3]** 。

**答案**：

[1] 7
[2] 3
[3] 6

> **解析：**
>
> 分组总数 $N = x/p$。每个分组长度 $L = p+h$。
> 1.  **发送时延**：源主机将所有分组发送到链路上的时间。
>     $N \times L / b = (x/p) \times (p+h) / b$。
>     加上中间节点的转发（实际上题目这里可能指总的发送/传输部分，但选项7包含了转发部分？不，选项7是 $(x/p)*(p+h)/b + (k-1)*(p+h)/b$。这是总的传输时延部分，包括源发送和中间转发）。
>     题目问“发送时延”，通常指源发送时延 $(x/p)(p+h)/b$。但选项中没有单独的这个。
>     观察选项7：$(x/p)*(p+h)/b + (k-1)*(p+h)/b$。这是源发送时延 + 中间路由器转发最后分组的时延。这通常被称为“总传输时间”或“总时延”中的时延部分。
>     **纠正**：题目可能把“发送时延”理解为所有分组从源发出加上在路径上的存储转发延迟？
>     让我们看“总时延”选项6：`kd+(x/p)*(p+h)/b+(k-1)*(p+h)/b`。这显然是 总时延 = 传播 + (源发送+中间转发)。
>     那么“传播时延”是 `kd` (选项3)。
>     剩下的“发送时延”填空，选项7最合适，代表了数据在设备上的处理/传输总时间（不含传播）。
>     *注：严格来说发送时延仅指结点将分组推向链路的时间，但在此语境下配合选项，[1]填7，[2]填3，[3]填6是逻辑自洽的。*

---

### 6. [简答题]

（习题1-24）论述具有五层协议的网络体系结构的要点，包括各层的主要功能。

**答案**：

（见解析）

> **解析：**
>
> **（1）物理层**
> 物理层的任务就是透明地传送比特流。物理层还要确定连接电缆插头的定义及连接法。
>
> **（2）数据链路层**
> 数据链路层的任务是在两个相邻结点间的线路上无差错地传送以帧（frame）为单位的数据。每一帧包括数据和必要的控制信息。
>
> **（3）网络层**
> 网络层的任务就是要选择合适的路由，使发送站的运输层所传下来的分组能够正确无误地按照地址找到目的站，并交付给目的站的运输层。
>
> **（4）运输层**
> 运输层的任务是向上一层的进行通信的两个进程之间提供一个可靠的端到端服务，使它们看不见运输层以下的数据通信的细节。
>
> **（5）应用层**
> 应用层直接为用户的应用进程提供服务。

---

### 7. [填空题]

长度为100字节的应用层数据交给运输层传送，需加上20字节的TCP首部。再交给网络层传送，需加上20字节的IP首部。最后交给数据链路层的以太网传送，加上首部和尾部共18字节。则发送方发送的总数据是 **[填空1]** 字节，实际发送的有效数据是 **[填空2]** 字节，数据传输效率是 **[填空3]** %（保留两位小数）。

若应用层数据长度为1000字节，则发送方发送的总数据是 **[填空4]** 字节，数据传输效率是 **[填空5]** %（保留两位小数）。

数据的传输效率是指发送的应用层数据除以所发送的总数据（即应用数据加上各种首部和尾部的额外开销）。

**答案**：

[1] 158
[2] 100
[3] 63.29
[4] 1058
[5] 94.52

> **解析：**
>
> **情况 1：应用层数据 100 B**
> *   总数据 = 100 (Data) + 20 (TCP) + 20 (IP) + 18 (Ethernet) = 158 字节。
> *   有效数据 = 100 字节。
> *   传输效率 = 100 / 158 ≈ 0.63291... ≈ 63.29%。
>
> **情况 2：应用层数据 1000 B**
> *   总数据 = 1000 + 20 + 20 + 18 = 1058 字节。
> *   传输效率 = 1000 / 1058 ≈ 0.94517... ≈ 94.52%。

---

## 第3次课测试

### 1. [单选题]

使用两种编码方案对比特流01100111进行编码的结果如下图所示，编码1和编码2分别是

![image](https://qn-sc0.yuketang.cn/ue_i/20210922/639c14bb-d915-402a-af15-2cbfa4c8681a.png)

A. NRZ和曼切斯特编码

B. NRZ和差分曼切斯特编码

C. NRZI 和曼切斯特编码

D. NRZI和差分曼切斯特编码

**答案**：A

> **解析：**
>
> *   **编码1**：电平高低直接代表0和1（例如高电平代表1，低电平代表0，或者反之），且在码元中间不跳变，这是**不归零制 (NRZ)** 编码。
> *   **编码2**：在每个码元的中心均有跳变。上跳（从低到高）表示0，下跳（从高到低）表示1（或者反之），这是**曼彻斯特编码**的特征。
> *   差分曼彻斯特编码的特征是每一位开始处是否有跳变（有跳变代表0，无跳变代表1），编码2不符合。
>
> 因此选A。

---

### 2. [填空题]

物理层的四个特性与协议三要素（语法、语义、同步）的对应关系是

机械特性对应  **[填空1]** ；

电气特性对应  **[填空2]** ；

功能特性对应  **[填空3]** ；

过程特性对应  **[填空4]** 。

**答案**：

[1] 语法
[2] 语法
[3] 语义
[4] 同步

> **解析：**
>
> 网络协议的三要素是：语法、语义、同步（时序）。
> *   **语法 (Syntax)**：数据与控制信息的结构或格式。物理层的**机械特性**（接口形状、引脚数目）和**电气特性**（电压范围）规定了“长什么样”，属于语法范畴。
> *   **语义 (Semantics)**：需要发出何种控制信息，完成何种动作以及做出何种响应。物理层的**功能特性**（某根线上出现的某一电平的电压表示何种意义）属于语义范畴。
> *   **同步 (Timing/Synchronization)**：事件实现顺序的详细说明。物理层的**过程特性**（对于不同功能的各种可能事件的出现顺序）属于同步（时序）范畴。

---

### 3. [填空题]

**假定某信道受奈氏准则限制的最高码元速率为20000码元/秒。如果采用振幅调制，把码元的振幅划分为16个不同等级来传送，那么可以获得的最高数据率是 **[填空1]** （b/s）。**

**答案**：

[1] 80000

> **解析：**
>
> 根据奈氏准则，无噪声信道的最高数据传输速率 $C$ 为：
> $C = R \times \log_2 V$
> 其中 $R$ 是波特率（码元传输速率），$V$ 是信号状态数（亦称信号电平数）。
> $C = 20000 \times \log_2 16 = 20000 \times 4 = 80000 \text{ (b/s)}$。

---

### 4. [填空题]

香农公式表明信道中的极限信息传输速率与信道的 **[填空1]** 和 **[填空2]** 有关。若某链路的带宽为8kHz，信噪比为30dB，该链路实际数据传输速率约为理论最大数据传输速率的50%，则该链路的信号功率S和噪声功率N的比值，S/N= **[填空3]** ，由香农公式计算出的理想最大数据传输速率约是 **[填空4]** kbps，实际数据传输速率约是 **[填空5]** kbps。（

![image](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAAAtCAYAAAAOT+HDAAAAAXNSR0IArs4c6QAACTVJREFUeF7tnAWobUUUhv9noaiI3d2J3YWd2IViNxaK3R3P7m6xC1tUVBAVMbBbQbC7W/cna3TevNl7n7PP8d6995mBy7ucO3vPrFn/rPnXv+a8EUotrUCDV2BEg+eepp5WQAnACQSNXoEE4Ea7L00+AThhoNErkADcaPelyScAJww0egUSgBvtvjT5BOCEgUavwFACeExJk0gaQ9I3kn5u9MqlyddiBYYSwFNKulPSEpLWkPRALVags0mw+TaS9KWkh4JHWMPpJc0niX70ebZgg44raRHbzH9IelnSB5L+KpkKz20r6YlsLi91Nu2+95pB0oaSrrAg5A9Q1a6eJpkAXL5802bAPFbSdpL2lHSu9wgOPVvSesFrXpd0sG1YB0zAzTuOMMC7R76XdKOkQyV9kjOdOSWdJWn1Ydr8zH19SSdL+tzsdXPtxa7y1S/pkQCcv0DTZc7aQ9Kukiaybj6AibrXSlo+i0ovSrpS0teStpS0cvbcx5J2knS39E/Fc3dJJ0ki6t5lnxOJNzdAA+KdJX1rY/HMHJIOlLSJpAns86E8vcbOIv6qkg6RtIyN/7QH4Cp29Qxa/wUJwKMvJzz9EkmrGWjeN9DN6kVg1u3o7PPDJd2eUYAdJH1lr8Lpp2Rg3kfSw5K2kDSppJskTS1pF3vGRWZADHihWGyYq7KNMVsG6stsc/DaV41yTDWEEXjTzP5TbXNxSryVnSgLSfIBPFeXdvUVvLwsAXj0JXVcfUZJl0o632jCxh6AZ5J0mzl3swxojwSvmVvSrfZ3oieOP0HSdZJ2DPgxPjjOotwtRjMAML/zt9Mk3SvphiHOH9hM50h61GjP+Nn49wUAhiZ1Yxcboa+tzgAmKXBH95+WHHH85jWOWBaZ1ovKwZjLZnzzSRuT95K0+ADm95sNuESqL4JJMfeLJG1tUWweSWtJ2kbS1REDVjDAQjtIFn/I3j+vJWz8PhwJ8OJ28rxg/8K/7/cA/IttyG7serOv6K1pBCZaHSVpJY/3Yfe7ki6XdKY52K0F0Yoo5fcHCCRbKAZEPRqgwxndthiAOVr3szH2ylEQXHTC6dAPkh3m8HxkAi6izy5pg4jSUQZgAtHEngoSbvSyv3eyJiGAJ7dTZqwe7Opk3MI+dYrAzIUs/XhJcD2kJQAIt4Qn8gOY/GRnYUukOLIB7eP2LwkH/TnyyODhm/0CMJuIH6gDPBd1INaIvvBZNg3AfM2Snw8jnR1HZhPGonQRgOfPIvQFXpJFQgk/R7J0QJ7Q5sJ72CCfVkBOCGDGhf+juKDCVLGrwjRGfaROAF4qA9v1lvAQUcnY/WIHxyyOAqzIOQDnGsv44aNk+U7awS4AdoZthnf6CGDUhpBSxBzhHI6DSXb85CfsH4vyfp88AE9jJwyn1h0ZV4VqrWk232MKBuOva2vHOu0t6fcKyAkBvGBAKWISYJldFaZRTwDDGc+TtL3JUbvlFAJIiIh+KAOAFyAj6sNDcZTffKWgnwBGTSDyLG3yFslWEYDfy6LfzJaIIbEhtfULwEhqcHGSQJQPThp0ayIwG9hJb4zHCbCVpOcqoiYEMJGcgEKCWdWuilP577G6RGCfAwJSeGOsIUMRRZY0erGKceJ9c3go/QAYkbxfFALAdFJRdA5ns2GfUxhimXhZpMqLwNANTp4DJD3mLZjTkAkIVD6J/igqSGFVWwhg/IRK0YtdVefy73N1AbADGnyXLDwvW/Ud/Ypl6kTrC3NWgmPORUgA/LZ3/LtHqKRxrOa1EFzwWn6IQGFlzn+Hc/gbxsP/DwrRMwC6eEEI4EWtGNOLXV0MH+9aFwCHi5NXUvXB5CJbUWUqBDDyGAmVA6yLbCSMJJCdRMdOObBL4p6RtFgJB/aTOCJbSEuKkjgStP2tooeX4b5o1360detG9ZCEK299iwBVhQOX2dUaAEMF4JUsOpdFAGesxQAcc7h7NgRwTEbDMfDvPIoRRmD6ErUR+ouit5PRoDwkWSRYeWM4CjWF9XkqMD4PwMztYqv2sQmhSmxQdHBkRHKE70yRQb3hIhCVwCo3AUMAk0Cy0YoUnjK7WgNgav5UrpDPYpUtZ6jjwEg46KlEVOr0J+ashEtyiDh54OkWwACD+xFFCYwPeua3TknS5+bJzTQ28EcdAtgVQNC6D8ouBP2Wla+XM+BSiADUvIt1G8/uZqBWVGkhgAFuWTJbZleVeYzyTF0oBCoESQbZLBUsuCXOCJtTIVAcqJTRj1InoA+1Te4kkGQQcYpUCCIp2Xne0RpLsFxkp2oX23BQBpK9H23jcKkHzThWSqYQgCRIMkZZ9rBIQpoXgV25N6RR0ApK1oyL7IgCgUoBdy+7tpkHqhDArPfpPdrVGgBjCE5AXwUwxxj4/KOOiAL/hMcRbeCWSFrcWSAq8hllVxrgheceae/LA7BzShEViAHYBx3FEzYA0Y5GRYykEmmPIxxAQiEANJyQecJRARIBhI1DNCeB5WYahYiwlVXiegZCBy+I5Sluo1a1q4Nhi7vUJQIzS/9qHqAhaiANweEWsEoTn4+0u7OI8e6Kot//1ywqr5iBBD4JUJCaaCGFcNGrSAbiuTyJy79OSZn7QRuHW2yz2E00EkOA7dtGN7goQHV2UTED2Jw+sQhZVwD3alerAOxAvLZFLfRLv+FwV31z9IJIyzGJ8wGUa/QlM//MIp8PYB8MZRJaEYD5Gxfaqfa5q5d8RgLFzTGiv5/tcxeCzcTFdQDuz5W+aMt5x3tdAYwNvdjVKAB3M1l3+QTHkXwQxfiqTt5tNIBMX+gEWi/fGqCvS3KgEO5bEwBlsh4KGzE74MJc2PnJ5lp0bTBvrt2sTx37DotdQ0khhmPRQ5rARSEie1UtdDhsSGMWrECbAexzVOgEdyeIvnwNyP9eWwJIg1egyQAmSeMOANk9F1QcL8YmLpBzo43MGZkNeQ5K4e4wxFzWCR9usKvbOfUmA9hPbEic4LkoE4j2LqHjphqJU+wSeTs9OmBWNRnAJA1cqOGbvFwscV8/woX8vwyUTtFjkeFSa+kKNBnAoUvGMRkqVsFrqfuSWW0CcPLmAK5AAvAAOr1NJicAt8mbA2hLAvAAOr1NJicAt8mbA2hLAvAAOr1NJicAt8mbA2hLAvAAOr1NJicAt8mbA2jL3wIiu0w+Dpe7AAAAAElFTkSuQmCC)

）

**答案**：

[1] 带宽
[2] 信噪比
[3] 1000
[4] 80
[5] 40

> **解析：**
>
> 1.  香农公式 $C = W \times \log_2(1 + S/N)$ 表明极限传输速率与**带宽** ($W$) 和 **信噪比** ($S/N$) 有关。
> 2.  信噪比 $30\text{dB} = 10 \log_{10}(S/N)$，解得 $S/N = 10^3 = \textbf{1000}$。
> 3.  理想最大数据率 $C = 8000 \times \log_2(1 + 1000) \approx 8000 \times \log_2(1024) = 8000 \times 10 = 80000\text{b/s} = \textbf{80}\text{kbps}$。
> 4.  实际速率 = $50\% \times C = 0.5 \times 80 = \textbf{40}\text{kbps}$。

---

### 5. [单选题]

某无噪声理想低通信道带宽为4MHz，采用QAM调制，若该信道的最大数据传输速率是48Mb/s，则该信道采用的QAM调制方案是（        ）

A. QAM-16

B. QAM-32

C. QAM-64

D. QAM-128

**答案**：C

> **解析：**
>
> 根据奈氏准则（无噪声信道）：
> $C = 2 \times W \times \log_2 V$
> 其中 $C = 48\text{Mb/s}, W = 4\text{MHz}$。
> 注意：题目中给的是最大速率。对于QAM，每个符号携带 $k$ 比特，则数据率 $= R \times k$。奈氏速率上限为 $2W$ 码元/秒。
> $48 \times 10^6 = 2 \times 4 \times 10^6 \times \log_2 V$
> $48 = 8 \times \log_2 V$
> $\log_2 V = 6$
> $V = 2^6 = 64$
> 所以采用 QAM-64 (64个状态)。选C。

---

## 第4次课测试

### 1. [单选题]

一个计算机网络，各计算机发送的数据帧在同轴电缆构成的共享信道中传输时，采用的复用技术是

A. FDM

B. TDM

C. STDM

D. WDM

**答案**：C

> **解析：**
>
> 在计算机网络中，分组交换网各计算机发送数据是动态分配信道资源的。
> *   **FDM**（频分复用）和 **TDM**（时分复用）通常指静态划分资源。
> *   **STDM**（统计时分复用）是动态分配时间片，按需传送。计算机网络中的CSMA/CD等协议在宏观上表现为统计时分复用，即用户仅在有数据时才占用信道，且是“随机”占用的。

---

### 2. [单选题]

实现宽带光纤接入的光配线网ODN，上行和下行共用光纤，采用的复用技术是

A. FDM

B. TDM

C. WDM

D. CDM

**答案**：C

> **解析：**
>
> 光配线网 (ODN) 中，为了在同一根光纤上实现全双工通信（上行和下行），通常使用 **WDM (波分复用)** 技术。
> 一般下行使用 1490nm 波长，上行使用 1310nm 波长。

---

### 3. [填空题]

有线宽带接入技术，主要有 **[填空1]** 、 **[填空2]** 和 **[填空3]** 。

**答案**：

[1] ADSL技术 / xDSL
[2] HFC网
[3] FTTx技术

> **解析：**
>
> 目前有线宽带接入技术主要包括：
> 1.  基于铜线电话网的 **xDSL** (如ADSL) 技术。
> 2.  基于有线电视网的 **HFC** (光纤同轴混合网) 技术。
> 3.  基于光纤的 **FTTx** (光纤到户/楼等) 技术。

---

### 4. [填空题]

使用信道复用技术可以通过共享信道，最大限度提高信道利用率。常用的信道复用技术有： **[填空1]** （FDM）、 **[填空2]** （TDM）、 **[填空3]** （STDM）、 **[填空4]** （WDM）、 **[填空5]** （CDM）等。

**答案**：

[1] 频分复用
[2] 时分复用
[3] 统计时分复用
[4] 波分复用
[5] 码分复用

> **解析：**
>
> *   FDM (Frequency Division Multiplexing): **频分复用**
> *   TDM (Time Division Multiplexing): **时分复用**
> *   STDM (Statistical TDM): **统计时分复用**（或异步时分复用）
> *   WDM (Wavelength Division Multiplexing): **波分复用**（光的频分复用）
> *   CDM (Code Division Multiplexing): **码分复用**

---

### 5. [填空题]

共有4个站进行码分多址通信。4个站的码片序列为

A：（－1－1－1＋1＋1－1＋1＋1） B：（－1－1＋1－1＋1＋1＋1－1）

C：（－1＋1－1＋1＋1＋1－1－1） D：（－1＋1－1－1－1－1＋1－1）

现收到这样的码片序列S：（－1＋1－3＋1－1－3＋1＋1）。问发送数据1的是 **[填空1]** 站和 **[填空2]** 站，发送数据0的是 **[填空3]** 站， **[填空4]** 站没有发送数据。

**答案**：

[1] A / D
[2] A / D
[3] B
[4] C

> **解析：**
>
> 计算规格化内积 $S \cdot X / 8$：
> 1.  **A站**：
>     $S \cdot A = (-1)(-1) + (1)(-1) + (-3)(-1) + (1)(1) + (-1)(1) + (-3)(-1) + (1)(1) + (1)(1)$
>     $= 1 - 1 + 3 + 1 - 1 + 3 + 1 + 1 = 8$
>     $8/8 = 1$。说明 A 发送了 **1**。
>
> 2.  **B站**：
>     $S \cdot B = (-1)(-1) + (1)(-1) + (-3)(1) + (1)(-1) + (-1)(1) + (-3)(1) + (1)(1) + (1)(-1)$
>     $= 1 - 1 - 3 - 1 - 1 - 3 + 1 - 1 = -8$
>     $-8/8 = -1$。说明 B 发送了 **0**。
>
> 3.  **C站**：
>     $S \cdot C = (-1)(-1) + (1)(1) + (-3)(-1) + (1)(1) + (-1)(1) + (-3)(1) + (1)(-1) + (1)(-1)$
>     $= 1 + 1 + 3 + 1 - 1 - 3 - 1 - 1 = 0$
>     $0/8 = 0$。说明 C **没发送**。
>
> 4.  **D站**：
>     $S \cdot D = (-1)(-1) + (1)(1) + (-3)(-1) + (1)(-1) + (-1)(-1) + (-3)(-1) + (1)(1) + (1)(-1)$
>     $= 1 + 1 + 3 - 1 + 1 + 3 + 1 - 1 = 8$
>     $8/8 = 1$。说明 D 发送了 **1**。

---

## 第5次课测试

### 1. [单选题]

在数据帧中，当所传的数据中出现了控制字符时，就必须采取适当的措施，使接收方不至于将数据误认为是控制信息。这样才能保证数据链路层的传输是 _______ 的。

A. 透明

B. 面向连接

C. 冗余

D. 无差错

**答案**：A

> **解析：**
>
> **透明传输**是指无论数据是什么样的比特组合，都能够按照原样正确地传送到接收方。当数据中出现与控制字符相同的组合时，必须采取措施（如字节填充或字符填充）加以区分，保证“透明性”。

---

### 2. [填空题]

PPP协议使用同步传输技术传送比特串0110111111111100，经过零比特填充后变成  **[填空1]**  。

若接收端收到的PPP帧的数据部分是0001110111110111110110，问删除发送端加入的零比特后变成  **[填空2]** 。

**答案**：

[1] 011011111011111000
[2] 00011101111111111110

> **解析：**
>
> **零比特填充法 (Zero-bit Stuffing)** 规则：
> 1.  **发送端**：只要发现有 5 个连续 1，则立即填入一个 0。
> 2.  **接收端**：对数据流进行扫描。每当发现 5 个连续 1 时，就把这 5 个连续 1 后的一个 0 删除。
>
> **(1) 填充过程**：
> 原数据：`0110 11111 11111 00`
> 扫描到第一个 `11111` -> 填 0 -> `0110 111110`
> 接下来的数据是 `11111 00` -> 填 0 -> `111110 00`
> 结果：`011011111011111000`
>
> **(2) 删除过程**：
> 接收数据：`0001110 111110 111110 110`
> 扫描：
> `0001110` (无)
> `111110` -> 删 0 -> `11111`
> `111110` -> 删 0 -> `11111`
> `110`
> 结果：`0001110 11111 11111 110` 即 `00011101111111111110`

---

### 3. [简答题]

（习题3-07 ）要发送的数据为1101011011。采用CRC的生成多项式是 $P(x) = x^4 + x + 1$ 。试求应添加在数据后面的余数。

数据在传输过程中最后一个1变成了0，问接收端能否发现？

若数据在传输过程中最后两个1都变成了0，问接收端能否发现？

采用CRC检验后，数据链路层的传输是否就变成了可靠的传输？

**答案**：

（见解析）

> **解析：**
>
> **(1) 计算余数 (FCS)**
> 生成多项式 $P(x) = x^4 + x + 1$ 对应的除数是 `10011`。
> 数据 `1101011011` 后补 4 个 0 (阶数)，变成 `11010110110000`。
> 进行模2除法：
> `11010110110000` / `10011`
> ... (除法过程)
> **余数是 1110**。
> 因此添加的检验序列是 `1110`。发送的帧为 `11010110111110`。
>
> **(2) 错误检测**
> *   **情况1**：最后一个1变成0。即 `1101011011` 变为 `1101011010`。
>     接收到的序列：`11010110101110`。
>     除以 `10011`，余数是 `0011` (11)。余数不为0，**能发现错误**。
> *   **情况2**：最后两个1都变成0。即 `1101011000`。
>     接收到的序列：`11010110001110`。
>     除以 `10011`，余数是 `0101` (101)。余数不为0，**能发现错误**。
>
> **(3) 可靠性**
> **否**。仅采用了 CRC 检验，只能实现**无差错接受**（即凡是验收合格的帧，我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错）。但如果帧丢失、重复或失序，CRC 无法解决。因此，数据链路层的传输还不是**可靠传输**（可靠传输通常需要确认和重传机制）。

---

## 第6次课测试

### 1. [单选题]

在一个采用CSMA/CD协议的网络中，传输介质是一根完整的电缆，传输速率为1Gbps，电缆中的信号传播速度是200000km/s。若最小数据帧长减少800比特，则最远的两个站点之间的距离至少需要

A. 增加160m

B. 增加80m

C. 减少160m

D. 减少80m

**答案**：D

> **解析：**
>
> 在 CSMA/CD 协议中，为了保证碰撞检测，最小帧长 $L_{min}$ 必须满足：
> $L_{min} \ge 2 \tau R$
> 其中 $\tau$ 是单程传播时延，$R$ 是数据传输速率。
> 而 $\tau = D / v$，其中 $D$ 是最大距离，$v$ 是信号传播速度。
> 代入公式：
> $L_{min} = 2 (D/v) R \implies D = \frac{L_{min} \cdot v}{2R}$
>
> 当最小帧长减少 $\Delta L = 800$ 比特时，距离的变化量 $\Delta D$ 为：
> $\Delta D = \frac{\Delta L \cdot v}{2R}$
> $v = 200000 \text{km/s} = 2 \times 10^8 \text{m/s}$
> $R = 1\text{Gbps} = 10^9 \text{b/s}$
> $\Delta L = -800 \text{bits}$ (减少)
>
> $\Delta D = \frac{-800 \times 2 \times 10^8}{2 \times 10^9} = \frac{-16 \times 10^{10}}{2 \times 10^9} = -80 \text{m}$
>
> 所以最远距离需要**减少 80m**。

---

### 2. [填空题]

数据率为10Mbit/s的以太网在物理媒体上的码元传输速率是 **[填空1]** 码元/秒。

**答案**：

[1] 20M / 20000000

> **解析：**
>
> 10Base-T 以太网使用**曼彻斯特编码**。在曼彻斯特编码中，每一位（bit）中间都有一次电平跳变（从低到高或从高到低），即每个比特包含两个码元（脉冲）。
> 因此，码元传输速率（波特率）是数据传输速率（比特率）的 2 倍。
> $10 \text{Mbit/s} \times 2 = 20 \text{Mbaud}$。

---

### 3. [填空题]

当数据率是10Mbit/s时，100比特时间是 **[填空1]** 微秒？

**答案**：

[1] 10

> **解析：**
>
> 比特时间 = 比特数量 / 数据率
> $t = 100 \text{ bit} / 10 \text{ Mb/s} = 100 / (10 \times 10^6) \text{ s} = 10 \times 10^{-6} \text{ s} = 10 \mu\text{s}$。

---

### 4. [简答题]

假定站点A和B在同一个10Mb/s以太网网段上。这两个站点之间的传播时延为225比特时间。回答下列问题：

（1）现假定A开始发送一帧，并且在A发送结束之前B也发送一帧。如果A发送的是以太网所容许的最短的帧，那么A在检测到和B发生碰撞之前能否把自己的数据发送完毕？换言之，如果A在发送完毕之前并没有检测到碰撞，那么能否肯定A所发送的帧不会和B发送的帧发生碰撞？（提示：在计算时应当考虑到每一个以太网帧在发送到信道上时，在MAC帧前面还要增加若干字节的前同步码和帧定界符）

（2）假定站点A和B在t=0时同时发送了数据帧。当t=225比特时间，A和B同时检测到发生了碰撞，并且在t=225+48=273比特时间完成了干扰信号的传输。A和B在CSMA/CD算法中选择不同的r值退避。假定A和B选择的随机数分别是rA=0和rB=1。试问A和B各在什么时间开始重传其数据帧？A重传的数据帧在什么时间到达B？A重传的数据会不会和B重传的数据再次发生碰撞？B会不会在预定的重传时间停止发送数据？

**答案**：

（见解析）

> **解析：**
>
> **（1）**
> *   以太网最短MAC帧长为 64 字节（512比特）。加上 8 字节的前同步码和帧定界符，实际发送长度为 72 字节 = 576 比特。
> *   因此，A 发送完毕需要 **576 比特时间**。
> *   传播时延 $\tau = 225$ 比特时间。往返传播时延 $2\tau = 450$ 比特时间。
> *   如果发生碰撞，碰撞信号传回 A 的最晚时间是 $2\tau = 450$ 比特时间。
> *   因为 $576 > 450$，即 A 的发送时间大于争用期。
> *   **结论**：在 A 发送完毕之前（576比特时间），如果发生碰撞，A 一定能检测到（因为最晚在450比特时间就能检测到）。反之，如果 A 在发送完毕之前没有检测到碰撞，就能够肯定 A 所发送的帧不会和 B 发送的帧发生碰撞。
>
> **（2）**
> *   $t=0$：A、B开始发送。
> *   $t=225$：A、B检测到碰撞（因为传播时延是225）。
> *   $t=273$：A、B完成 48 比特的人为干扰信号传输。此时A、B停止发送，开始退避算法。
> *   **A的重传**：
>     *   A选择 $r_A=0$。退避时间 $0 \times 512 = 0$。
>     *   但是，CSMA/CD规定，必须在信道空闲 96 比特时间（帧间最小间隔）后才能发送。
>     *   A 在 $t=273$ 停止发送。此时信道上有 B 的干扰信号传输过来。B 的干扰信号在 $t=273$ 发完，传播到 A 需要 225 比特时间。
>     *   所以在 $t = 273 + 225 = 498$ 时，A 才能检测到信道空闲。
>     *   A 需要再等待 96 比特时间。
>     *   **A 开始重传时间**：$t_A = 498 + 96 = 594$ 比特时间。
> *   **B的重传**：
>     *   B选择 $r_B=1$。退避时间 $1 \times 512 = 512$ 比特时间。
>     *   B 也在 $t=498$ 检测到信道空闲。
>     *   B 应该在 $t = 498 + 512 = 1010$ 附近准备发送？
>     *   通常退避时间是从由于冲突而停止发送的时刻算起，还是要加上帧间间隔？
>     *   **更精确的计算**：
>         *   $t=273$，干扰信号发完。
>         *   信道变为空闲的时刻：
>             *   对于 A：B 的干扰信号尾部到达 A 的时刻 = $273 + 225 = 498$。
>             *   对于 B：A 的干扰信号尾部到达 B 的时刻 = $273 + 225 = 498$。
>         *   A 准备发送时刻：$498 + 96(\text{IFG}) + 0(\text{Backoff}) = 594$。
>         *   B 准备发送时刻：$498 + 96(\text{IFG}) + 512(\text{Backoff}) = 1106$。
> *   **碰撞分析**：
>     *   A 在 $t=594$ 开始重传数据。
>     *   A 的数据头到达 B 的时间：$594 + 225 = 819$。
>     *   B 在 $t=819$ 时检听到信道变忙（收到A的重传数据）。
>     *   B 预定的发送时间是 $1106$。
>     *   因为 $819 < 1106$，B 在轮到自己发送之前就检测到信道忙。
>     *   **结论**：B 会执行载波监听（CS），发现信道忙，因此 **B 不会发送数据**，而是挂起等待信道空闲。所以 **不会再次发生碰撞**。

---

## 第7次课测试

### 1. [单选题]

到2017年，IEEE颁布的以太网标准中，最高速率达到了

A. 40Gbit/s

B. 100Gbit/s

C. 200Gbit/s

D. 400Gbit/s

**答案**：D

> **解析：**
>
> 2017年12月，IEEE 批准了新的以太网标准 IEEE 802.3bs，包括了 **200Gbit/s** 和 **400Gbit/s** 的以太网。因此最高速率达到了 400Gbit/s。

---

### 2. [填空题]

若10个站都连接到一个10Mbit/s以太网集线器上，每个站能得到的平均带宽是 **[填空1]** Mbit/s。若10个站都连接到一个10Mbit/s以太网交换机上，每个站能得到的平均带宽是 **[填空2]** Mbit/s。

**答案**：

[1] 1
[2] 10

> **解析：**
>
> 1.  **集线器 (Hub)** 工作在物理层，共享传输媒体。所有端口即一个冲突域，带宽由所有连接的站点共享。
>     因此，每个站平均拥有带宽 = 总带宽 / 站点数 = $10 / 10 = \textbf{1} \text{ Mbit/s}$。
> 2.  **交换机 (Switch)** 工作在数据链路层，能隔离冲突域。每个端口有自己独立的带宽（在全双工或半双工非拥塞情况下）。
>     因此，每个站能得到的平均带宽仍为 **10** Mbit/s。

---

### 3. [简答题]

在下图中，以太网交换机有6个端口，分别接到5台主机和一个路由器。

![image](https://qn-sc0.yuketang.cn/ue_i/20211020/96d294d5-ad59-438e-9f74-711bb36f84b7.png)

在下面表中的“动作”一栏中，表示先后发送了4个帧。假定在开始时，以太网交换机的交换表是空的。试把该表中其他的栏目都填写完。

![image](https://qn-sc0.yuketang.cn/ue_i/20211020/0782a19a-06ad-4862-8f56-bbe83aa24ac1.png)

**答案**：

（见解析）

> **解析：**
>
> | 动作 | 交换表的状态 | 向哪些接口转发帧 | 说明 |
> | :--- | :--- | :--- | :--- |
> | A发送帧给D | 写入（A，1） | 2、3、4、5、6 | 表中无D地址，广播（泛洪），同时学习A |
> | D发送帧给A | 写入（D，4） | 1 | 表中有A地址，单播转发，同时学习D |
> | E发送帧给A | 写入（E，5） | 1 | 表中有A地址，单播转发，同时学习E |
> | A发送帧给E | 不变 | 5 | 表中有E地址，单播转发，刷新A的时间 |

---

## 第8次课测试

### 1. [单选题]

某主机的IP地址为180.80.77.55，子网掩码为255.255.252.0。若该主机向其所在子网发送广播分组，则目的地址可以是

A. 180.80.76.0

B. 180.80.76.255

C. 180.80.77.255

D. 180.80.79.255

**答案**：D

> **解析：**
>
> 1.  **子网掩码**：255.255.252.0。
>     第三字节 252 对应的二进制是 `11111100`。
>     说明前 22 位是网络前缀，后 10 位是主机号。
> 2.  **IP地址**：180.80.77.55。
>     第三字节 77 对应的二进制是 `01001101`。
> 3.  **计算网络地址**：
>     保留前 22 位：`180.80`（前两字节）以及第三字节的前6位 `010011`。
>     第三字节网络部分：`01001100` = 76。
>     网络地址为：`180.80.76.0`。
> 4.  **计算广播地址**：
>     将主机位（后 10 位）全部置 1。
>     第三字节后 2 位置 1：`01001111` = 79。
>     第四字节全 1：255。
>     广播地址为：**180.80.79.255**。

---

### 2. [单选题]

有两个CIDR地址块，地址块1为208.128/11，地址块2为208.130.28/22，这两个地址块的关系是

A. 地址块1包含地址块2

B. 地址块2包含地址块1

C. 两地址块互不包含

**答案**：A

> **解析：**
>
> *   **地址块 1** (208.128/11)：
>     第二字节 128 (`10000000`)。/11 表示前 11 位匹配，即第二字节前 3 位固定为 `100`。
>     地址范围：208.128.0.0 到 208.159.255.255。
> *   **地址块 2** (208.130.28/22)：
>     IP 208.130.28.0。
>     208.130 (`10000010`) 在 128~159 范围内。
>     因此，地址块 2 是地址块 1 的子集，即 **地址块 1 包含地址块 2**。

---

### 3. [填空题]

网络层可抽象地划分为两个层面，分别是 **[填空1]** 层面和 **[填空2]** 层面。

**答案**：

[1] 数据 / 转发
[2] 控制

> **解析：**
>
> 网络层可以抽象为：
> 1.  **数据层面 (Data Plane)**：也称**转发层面**。负责处理流经路由器的数据分组，查表转发。
> 2.  **控制层面 (Control Plane)**：负责路由选择算法和路由协议，计算路由表，控制数据层面的转发逻辑。

---

## 第9次课测试

### 1. [单选题]

按查找路由表的最长前缀匹配原则，默认路由可放在转发表的

A. 第1项

B. 最后1项

C. 任意位置

D. 主机路由的后面

**答案**：B

> **解析：**
>
> 默认路由的前缀长度最短（0位），根据**最长前缀匹配**原则，路由器通常将路由表按前缀长度排序（或使用特定的数据结构）。逻辑上，只有当所有特定的路由项都不匹配时，才匹配默认路由，因此通常认为它放在转发表的最后1项。

---

### 2. [简答题]

试说明IP地址和MAC地址的区别。为什么要使用这两种不同的地址？

**答案**：

（见解析）

> **解析：**
>
> **(1) 区别**：
> *   **位置不同**：IP地址放在IP数据报的首部，MAC地址放在MAC帧的首部。
> *   **层级不同**：IP地址应用于网络层及以上，MAC地址应用于数据链路层及以下。
> *   **变化特性**：在传输过程中，源IP和目的IP通常保持不变，而源MAC和目的MAC在每一跳（网络段）都会发生变化。
>
> **(2) 为什么使用两种地址**：
> *   **MAC地址**：用于屏蔽底层物理网络的差异（不同类型的物理网络MAC地址格式不同，如以太网、令牌环等），解决局域网内的硬件寻址问题。它是物理固化的。
> *   **IP地址**：提供统一的逻辑编址方案，屏蔽了底层物理网络的异构性，使得不同类型的网络能够互连互通。IP地址协助路由选择，实现跨网络通信。

---

### 3. [简答题]

**一个数据报长度为4000字节（固定首部长度）。现在经过一个网络传送，但此网络能够传送的最大数据长度为1500字节。试问应当划分为几个短些的数据报片？各数据报片的数据字段长度、片偏移字段和MF标志应为何数值？**

**答案**：

（见解析）

> **解析：**
>
> *   **IP数据报总长**：4000字节。假设首部长度为固定的 **20字节**，则数据载荷长度为 $4000 - 20 = 3980$ 字节。
> *   **MTU**：1500字节。每个分片最大数据载荷 = $1500 - 20 = 1480$ 字节。
>
> **分片计算**：
> 1.  **第1片**：数据 1480 B。剩余 $3980 - 1480 = 2500$ B。
>     片偏移 = $0 / 8 = 0$。MF = 1。
> 2.  **第2片**：数据 1480 B。剩余 $2500 - 1480 = 1020$ B。
>     片偏移 = $1480 / 8 = 185$。MF = 1。
> 3.  **第3片**：数据 1020 B。剩余 0。
>     片偏移 = $(1480 + 1480) / 8 = 2960 / 8 = 370$。MF = 0。
>
> | | 数据字段长度 | 片偏移 | MF |
> | :--- | :--- | :--- | :--- |
> | 数据报片1 | 1480 | 0 | 1 |
> | 数据报片2 | 1480 | 185 | 1 |
> | 数据报片3 | 1020 | 370 | 0 |

---

### 4. [简答题]

设某路由器建立了以下转发表：


| 网络前缀 | 下一跳 |
| --- | --- |
| 192.4.153.0/26 | **R3** |
| 128.96.39.0/25 | **接口m0** |
| 128.96.39.128/25 | **接口m1** |
| 128.96.40.0/25 | **R2** |
| *（默认） | **R4** |

现共收到5个分组，其目的地址分别为：

（1）128.96.39.10；（2）128.96.40.12；（3）128.96.40.151；（4）192.4.153.17；（5）192.4.153.90。

试分别计算其下一跳。（要求有计算过程！）

**答案**：

（见解析）

> **解析：**
>
> **(1) 目的地址 128.96.39.10**
> *   与 128.96.39.0/25：`128.96.39.10` AND `255.255.255.128` -> `128.96.39.0`。**匹配**。
> *   与 128.96.39.128/25：`128.96.39.10` < 128。**不匹配**。
> *   **下一跳：接口 m0**。
>
> **(2) 目的地址 128.96.40.12**
> *   与 128.96.40.0/25：`128.96.40.12` AND `255.255.255.128` -> `128.96.40.0`。**匹配**。
> *   **下一跳：R2**。
>
> **(3) 目的地址 128.96.40.151**
> *   与 128.96.40.0/25：`128.96.40.151` (>127) AND ... -> `128.96.40.128`。不等于 `128.96.40.0`。**不匹配**。
> *   其他特定路由也不匹配。
> *   **下一跳：R4 (默认)**。
>
> **(4) 目的地址 192.4.153.17**
> *   与 192.4.153.0/26：`192.4.153.17` AND `255.255.255.192` -> `192.4.153.0`。**匹配**。
> *   **下一跳：R3**。
>
> **(5) 目的地址 192.4.153.90**
> *   与 192.4.153.0/26：`192.4.153.90` (`01011010`) AND `192` (`11000000`) -> `192.4.153.64`。不等于 `192.4.153.0`。**不匹配**。
> *   **下一跳：R4 (默认)**。

---

## 第10次课测试

### 1. [单选题]

有关路由协议，下列说法正确的是

A. RIP使用TCP，OSPF使用IP，BGP使用UDP。

B. RIP存在“好消息传播的快，坏消息传播的慢”的问题。

C. 内部网关协议和外部网关协议都是为了选择最佳路由。

D. RIP周期性的和所有站点交换路由表信息，而OSPF只有当网络拓扑改变时才采用洪泛法广播链路状态信息。

**答案**：B

> **解析：**
>
> *   **A 错误**：RIP 使用 UDP，OSPF 使用 IP，BGP 使用 TCP。
> *   **B 正确**：RIP 基于距离向量算法，存在“计数到无穷”（Count-to-Infinity）问题，表现为好消息传得快，坏消息（链路故障）传得慢。
> *   **C 错误**：内部网关协议（IGP，如RIP、OSPF）主要致力于寻找最佳路由（最短路径）；外部网关协议（EGP，如BGP）主要侧重于策略控制和可达性，寻找一条能够到达目的网络且比较好的路由，而非绝对“最佳”。
> *   **D 错误**：RIP 仅和**相邻**站点交换信息，而不是所有站点。OSPF 也会周期性（如30分钟）刷新链路状态，不仅仅是拓扑改变时。

---

### 2. [填空题]

设某路由器输入端的接收速率为2.5Gbit/s，接收分组的平均长度为256字节，则路由器输入端口的处理速率需至少达到 **[填空1]** Mpps（百万分组每秒，保留小数点后两位）时，才能够跟上线路把分组传送到路由器的速率。

**答案**：

[1] 1.22

> **解析：**
>
> *   **输入速率** $R = 2.5 \text{ Gbit/s} = 2.5 \times 10^9 \text{ bit/s}$。
> *   **分组长度** $L = 256 \text{ Byte} = 256 \times 8 \text{ bit} = 2048 \text{ bit}$。
> *   **包处理速率 (PPS)** = $R / L$
>     $= \frac{2.5 \times 10^9}{2048}$
>     $\approx 1220703 \text{ pps}$
>     $= 1.22 \text{ Mpps}$。

---

### 3. [简答题]

假定网络中的路由器B的路由表有如下的项目（这三列分别表示“目的网络”、“距离”和“下一跳路由器”）:

N1          7            A

N2          2            C

N6          8            F

N8          4            E

N9          4            F

现在B收到从C发来的路由信息（这两列分别表示“目的网络”和“距离””）:

N2          4

N3          8

N6          4

N8          3

N9          5

试求出路由器B更新后的路由表（详细说明每一个步骤）。

**答案**：

（见解析）

> **解析：**
>
> B 收到 C 的路由表，首先将 C 的所有距离 +1（假定 B-C 链路开销为 1），得到 B 通过 C 到达各网络的距离：
> C的通告 -> 经C到达的距离：
> N2: 4 -> 5
> N3: 8 -> 9
> N6: 4 -> 5
> N8: 3 -> 4
> N9: 5 -> 6
>
> **更新步骤：**
> 1.  **N2**：新路由 (N2, 5, C)。原子路由 (N2, 2, C)。**下一跳相同 (都是C)**，必须更新。结果：(N2, 5, C)。
> 2.  **N3**：新路由 (N3, 9, C)。原路由表中无 N3。**添加**。结果：(N3, 9, C)。
> 3.  **N6**：新路由 (N6, 5, C)。原路由 (N6, 8, F)。下一跳不同，新距离 5 < 原距离 8。**更新**。结果：(N6, 5, C)。
> 4.  **N8**：新路由 (N8, 4, C)。原路由 (N8, 4, E)。下一跳不同，新距离 4 = 原距离 4。**不改变**。
> 5.  **N9**：新路由 (N9, 6, C)。原路由 (N9, 4, F)。下一跳不同，新距离 6 > 原距离 4。**不改变**。
> 6.  **N1**：C 未通告 N1。保持不变。
>
> **更新后的路由表：**
> | 目的网络 | 距离 | 下一跳 |
> | :--- | :--- | :--- |
> | N1 | 7 | A |
> | N2 | 5 | C |
> | N3 | 9 | C |
> | N6 | 5 | C |
> | N8 | 4 | E |
> | N9 | 4 | F |

---

### 4. [简答题]

网络如下图所示。假定AS1和AS4运行RIP，AS2和AS3运行OSPF。AS之间运行eBGP和iBGP。目前先假定在AS2和AS4之间没有物理连接（图中的虚线表示这个假定）。

![image](https://qn-sc0.yuketang.cn/ue_i/20211114/14f89147-42ea-4bd3-afed-6cefd5a6d24f.png)

试回答：

（1）路由器R3c使用哪个协议知道前缀X（X在AS4中）？

（2）路由器R1d使用哪个协议知道前缀X？

（3）当路由器R1d将前缀X的路由写入转发表后。若收到一个目的地址前缀为X的分组，R1d应当从接口1还是接口2转发该分组？请简述理由。

（4）现假定AS2和AS4之间有物理连接，即图中的虚线变成了实线。假定路由器R1d知道到达前缀X可以经过AS2，但也可以经过AS3。试问路由器R1d应当从接口1还是接口2转发分组？请简述理由。

**答案**：

（见解析）

> **解析：**
>
> **(1)**
> X 位于 AS4。R3c 位于 AS3 的边界，直接与 AS4 的 R4a 相连。
> 不同 AS 之间的路由信息传递使用 **eBGP** 协议。
> 因此 R3c 通过 eBGP 从 R4a 获知前缀 X。
>
> **(2)**
> R1d 位于 AS1 内部。AS1 需要从外部（AS3 或 AS2）学习路由。
> R1c（AS1边界）通过 eBGP 从 AS3 学习到 X，然后通过 **iBGP** 将 X 的路由信息告诉 AS1 内部的 R1d。
>
> **(3)**
> **接口 1**。
> R1d 通过 iBGP 知道去往 X 的出口是 R1c。
> AS1 内部运行 RIP。R1d 此时需要查找去往 iBGP 下一跳（R1c）的最佳路径。
> 根据 RIP（跳数最少），R1d 到 R1c 最近的路径通常是直连或经过 R1a。
> 题目图中暗示 R1d 的接口 1 连接 R1a，R1a 连接 R1c（假设逻辑结构如此，或接口1指向 AS3 方向的路径）。根据解析提示，通过 RIP 获得的到 R1c 的下一跳是 R1a，而 R1a 连在 R1d 的接口 1 上。
>
> **(4)**
> **接口 2**。
> 当 AS2 和 AS4 连通后，R1d 学习到有两条路径去往 AS4（经 AS2 或 经 AS3）。
> BGP 在选择路由时，有一条规则是“**热土豆路由**” (Hot Potato Routing)，即尽量把分组尽快送出本 AS。
> R1d 会比较到 AS2 边界路由器 (R1b) 和 AS3 边界路由器 (R1c) 的内部开销 (IGP Cost)。
> 从图上看，R1d 离 R1b 更近（假设接口 2 直连 R1b，或者跳数更少）。
> 因此，R1d 会选择内部开销最小的出口，即通过接口 2 转发给 R1b。

---

## 第11次课测试

### 1. [填空题]

**[填空1]** 命令直接使用网络层的ICMP协议来测试两个主机之间的连通性。

**答案**：

[1] PING

> **解析：**
>
> **PING** (Packet InterNet Groper) 是一个使用 ICMP (Internet Control Message Protocol) 回送请求 (Echo Request) 和回送回答 (Echo Reply) 报文来测试主机之间连通性的应用层工具。

---

### 2. [单选题]

若路由器R因为拥塞丢弃IP分组，则此时R可以向发出该IP分组的源主机发送的ICMP报文类型是

A. 路由重定向

B. 目的不可达

C. 源抑制

D. 超时

**答案**：C

> **解析：**
>
> *   **源抑制 (Source Quench)**：当路由器或主机因拥塞而丢弃数据报时，可向源点发送源抑制报文，使源点知道应当把数据报的发送速率放慢。
> *   注：虽然现代网络中出于安全和控制流量的原因，源抑制报文已很少使用或被弃用，但在标准 ICMP 定义中，它是处理拥塞的标准机制。

---

### 3. [单选题]

将IPv6地址0000:0000:0000:AF36:7328:0000:87AA:0398，用零压缩方法写成的简洁形式是

A. 0:AF36:7328::87AA:398

B. 0:AF36:7328:0:87AA:398

C. 0::AF36:7328::87AA:398

D. 0::AF36:7328:0:87AA:398

**答案**：D

> **解析：**
>
> IPv6 零压缩规则：
> 1.  一连串连续的零可以被 `::` 取代。
> 2.  `::` 只能使用一次。
>
> 原地址：`0000:0000:0000` (前3组) : `AF36` : `7328` : `0000` : `87AA` : `0398`
>
> 选项 D `0::AF36:7328:0:87AA:398`：
> *   保留了第一个 `0`。
> *   将第 2、3 组 `0000:0000` 压缩为 `::`。
> *   第 6 组 `0000` 简写为 `0`。
> *   这是合法的压缩形式之一。虽然最简形式通常是 `::AF36...`（压缩前三组），但在给定选项中，只有 D 是语法正确且进行了零压缩的（C使用了两次 `::`，A/B 压缩不完全或逻辑不同）。

---

### 4. [单选题]

ICMPv6不包括以下哪个协议的功能。

A. ICMP

B. IGMP

C. RARP

D. ARP

**答案**：C

> **解析：**
>
> ICMPv6 是 IPv6 的重要组成部分，它的功能比 ICMPv4 要强很多。
> *   它合并了 **ICMPv4** 的功能（差错报告、回送等）。
> *   它包含了 **IGMP** (互联网组管理协议) 的功能（通过多播听众发现 MLD）。
> *   它包含了 **ARP** (地址解析协议) 的功能（通过邻居发现协议 NDP）。
> *   **RARP** (反向地址解析协议) 的功能在 IPv6 中通常通过 DHCPv6 或自动配置机制实现，不属于 ICMPv6 的直接功能子集。

---

### 5. [单选题]

下列IPv4地址，哪个是多播地址。

A. 10000001 00001011 00001011 11101111

B. 11000001 10000011 00011011 11111111

C. 11100111 11011011 10001011 01101111

D. 11111001 10011011 11111011 00001111

**答案**：C

> **解析：**
>
> IPv4 多播地址是 **D类地址**。
> D类地址的前四位固定为 **1110**。
> *   A: 10... (B类)
> *   B: 110... (C类)
> *   C: 1110... (D类，多播)
> *   D: 1111... (E类，保留)

---

### 6. [单选题]

下列IP地址中，哪个不是专用地址？

A. 10.10.138.20

B. 172.100.1.2

C. 172.19.30.5

D. 192.168.0.1

**答案**：B

> **解析：**
>
> 专用 IP 地址范围（RFC 1918）：
> 1.  `10.0.0.0` 到 `10.255.255.255`
> 2.  `172.16.0.0` 到 `172.31.255.255`
> 3.  `192.168.0.0` 到 `192.168.255.255`
>
> 选项 B `172.100.1.2` 不在 `172.16 ~ 172.31` 之间，因此它是公网地址（非专用地址）。

---

### 7. [多选题]

以下哪些应用或协议中使用了IP隧道技术。

A. IP多播

B. 虚拟专用网VPN

C. 网络地址转换NAT

D. IPv4向IPv6过渡

**答案**：B, A, D

> **解析：**
>
> *   **VPN**：在公用网上构建虚拟专用网，广泛使用隧道技术（如IPsec隧道模式）。
> *   **IP多播**：在不支持多播的网络（如MBONE）上进行多播传送时，使用隧道技术封装多播包。
> *   **IPv4向IPv6过渡**：使用隧道技术（如6in4, 6to4）将IPv6数据报封装在IPv4中传输。
> *   **NAT**：是地址转换技术，修改IP首部地址，通常不被称为隧道技术。

---

### 8. [填空题]

要使配置专用地址的计算机能够访问因特网，需要在专用网连接到因特网的路由器上安装 **[填空1]** 软件。

**答案**：

[1] NAT / 网络地址转换

> **解析：**
>
> **NAT (网络地址转换)** 能够将专用网络内部使用的专用 IP 地址转换为在因特网上有效的全球 IP 地址，从而允许内部主机访问因特网。

---

## 第12次课测试

### 1. [填空题]

从通信和信息处理的角度看，运输层向它上面的应用层提供通信服务，它属于面向  **[填空1]**  部分的最高层，同时也是  **[填空2]**  功能中的最低层。

**答案**：

[1] 通信
[2] 用户

> **解析：**
>
> 运输层是计算机网络体系结构中至关重要的一层。
> *   从通信角度看，它属于面向**通信**部分的最高层，负责为应用进程提供端到端的逻辑通信。
> *   从信息处理角度看，它属于面向**用户**（应用）功能中的最低层，屏蔽了底层网络核心的细节。

---

### 2. [填空题]

一个UDP用户数据报的首部十六进制表示是：06 32 00 45 00 1C E2 17。则其源端口表示的十进制数是 **[填空1]** 、目的端口表示的十进制数是 **[填空2]** 、用户数据报的总长度为 **[填空3]** 字节、数据部分长度为 **[填空4]** 字节。此用户数据报是从客户发送给服务器的吗？ **[填空5]** （是，不是）使用此UDP的服务器程序是 **[填空6]** 。

**答案**：

[1] 1586
[2] 69
[3] 28
[4] 20
[5] 是
[6] TFTP

> **解析：**
>
> UDP首部格式（8字节）：源端口(2B) | 目的端口(2B) | 长度(2B) | 检验和(2B)
>
> 1.  **源端口**：`06 32` (16进制) = $6 \times 256 + 50 = 1586$。
> 2.  **目的端口**：`00 45` (16进制) = $69$。
> 3.  **总长度**：`00 1C` (16进制) = $16 + 12 = 28$ 字节。
> 4.  **数据长度**：总长度 - 首部长度 = $28 - 8 = 20$ 字节。
> 5.  **方向**：目的端口 69 是 **TFTP** 协议的熟知端口（服务器端监听端口）。源端口 1586 是短暂端口（客户端使用）。因此是从客户发送给服务器的。
> 6.  **协议**：使用端口 69 的服务器程序是 **TFTP** (简单文件传输协议)。

---

### 3. [多选题]

假定使用连续ARQ协议，发送窗口大小是3，序号范围是[0，15]，而传输媒体保证在接收方能够按序收到分组。在某一时刻，接收方下一个期望收到的序号是5。则以下哪些序号组合可能出现在发送方的发送窗口？

A. [1,3]

B. [2,4]

C. [3,5]

D. [4,6]

E. [5,7]

**答案**：B, C, D, E

> **解析：**
>
> *   **接收方期望收到 5**：说明接收方已经正确接收并确认了序号 0 到 4 的分组。意味着接收方发送了 `ACK 5`（或累计确认到4）。
> *   由于 ACK 可能在传输途中滞后或丢失，发送方可能还不知道这一情况。
> *   **情况 1 (ACK 丢失或滞后)**：发送方刚发完 2, 3, 4，等待确认。此时窗口可能是 `[2, 4]` (假定已确认了1，正在发2,3,4? 不，如果窗口由ACK推动。若收到ACK 2(期望2)，窗口[2,4]。若收到ACK 3，窗口[3,5]...
>     *   若发送方只收到 ACK 2，窗口为 `[2, 4]`。
>     *   若发送方只收到 ACK 3，窗口为 `[3, 5]`。
>     *   若发送方只收到 ACK 4，窗口为 `[4, 6]`。
>     *   若发送方收到了 ACK 5，窗口为 `[5, 7]`。
> *   **排除 A [1, 3]**：如果窗口是 [1, 3]，说明发送方还没发出 4。但接收方已经收到 4 了（期望 5）。这不可能（除非重传旧的? 但这里讨论正常滑动）。
> *   因此，可能的状态是 B, C, D, E。

---

### 4. [简答题]

主机A向主机B发送一个很长的文件，其长度为L字节。假定TCP使用的MSS为1460字节。

（1）在TCP的序号不重复使用的条件下，L的最大值是多少？

（2）假定使用上面计算出的文件长度，而运输层、网络层和数据链路层所用的首部开销共66字节，链路的数据率为10Mb/s，试求这个文件所需的最短发送时间。

**答案**：

（见解析）

> **解析：**
>
> **(1)**
> TCP 序号字段占 32 位。
> 在序号不重复使用的情况下，最大传输量为 $2^{32}$ 字节。
> $L_{max} = 2^{32} \text{ Byte} = 4 \text{ GB}$。
>
> **(2)**
> *   **文件长度** $L = 4294967296$ 字节。
> *   **MSS** = 1460 字节。
> *   **分片数量** $Q = \lfloor L / MSS \rfloor = \lfloor 4294967296 / 1460 \rfloor = 2941758$ 个满载片。
>     剩余数据 $R = L \mod MSS = 616$ 字节。
> *   **总报文长度**：
>     每个满载片增加 66 字节开销。
>     最后一个非满载片也增加 66 字节开销。
>     总发送字节 $N = L + (Q + 1) \times 66$
>     $N = 4294967296 + (2941759) \times 66$
>     $N = 4294967296 + 194156094 = 4489123390 \text{ 字节}$。
> *   **发送时间**：
>     $t = \frac{N \times 8}{10 \times 10^6} = \frac{4489123390 \times 8}{10^7} = 3591.298... \text{ 秒}$。
>     约等于 **3591.3 秒** (或约 59.85 分钟)。

---

## 第13次课测试

### 1. [单选题]

主机甲向主机乙发送一个（SYN=1，seq=11220）的TCP段，期望与主机乙建立TCP连接，若主机乙接收该连接请求，则主机乙向主机甲发送的正确的TCP段可能是

A. （SYN=0，ACK=0，seq=11221，ack=11221）

B. （SYN=1，ACK=1，seq=11220，ack=11220）

C. （SYN=1，ACK=1，seq=11221，ack=11221）

D. （SYN=0，ACK=0，seq=11220，ack=11220）

**答案**：C

> **解析：**
>
> 在 TCP 三次握手中，第二次握手（服务器响应客户端请求）：
> *   标志位：**SYN=1**，**ACK=1**。
> *   确认号 (ack)：客户端的 seq + 1 = 11220 + 1 = **11221**。
> *   序列号 (seq)：服务器自己的随机初始序号（本题中恰好也是11221，这是允许的，或者是选项设定）。
> *   因此选项 C 正确。

---

### 2. [填空题]

通信信道带宽为1Gbit/s，端到端传播时延为10ms。TCP的发送窗口为65535字节。试问：可能达到的最大吞吐量是 **[填空1]** Mbit/s（保留小数点后1位）。信道的利用率是 **[填空2]** %（保留小数点后2位）。

**答案**：

[1] 25.5
[2] 2.55

> **解析：**
>
> *   **发送窗口** $W = 65535 \text{ Byte} \times 8 = 524280 \text{ bit}$。
> *   **带宽** $R = 1 \text{ Gbit/s} = 10^9 \text{ bit/s}$。
> *   **发送时延** $T_D = W/R = 524280 / 10^9 \approx 0.000524 \text{ s} = 0.524 \text{ ms}$。
> *   **往返时延** $RTT = 2 \times 10 \text{ ms} = 20 \text{ ms}$。
> *   **总时间**（发送一个窗口的数据并收到确认）$T = T_D + RTT = 0.524 + 20 = 20.524 \text{ ms}$。
> *   **最大吞吐量** $= W / T = 524280 \text{ bit} / 0.020524 \text{ s} \approx 25544728 \text{ bit/s} \approx 25.5 \text{ Mbit/s}$。
> *   **信道利用率** $= \text{吞吐量} / \text{带宽} = 25.5 \text{ Mbit/s} / 1000 \text{ Mbit/s} = 2.55\%$。

---

### 3. [填空题]

假定TCP在开始建立连接时，发送方设定超时重传时间RTO=6秒。设α＝1/8=0.125， β=1/4=0.25。

（1）当发送方收到对方的连接确认报文段时，测量出的RTT样本值为1.5秒。则现在的RTO值是 **[填空1]** 秒。

当发送方收到对方的连接确认报文段时，测量出的RTT样本值为2.5秒。则现在的RTO值是 **[填空2]** 秒。

**答案**：

[1] 4.5
[2] 4.875

> **解析：**
>
> **(1) 第一次测量** ($RTT_{sample} = 1.5$)
> *   $RTT_S = RTT_{sample} = 1.5$ s
> *   $RTT_D = RTT_{sample} / 2 = 0.75$ s
> *   $RTO = RTT_S + 4 \times RTT_D = 1.5 + 4 \times 0.75 = 1.5 + 3 = 4.5$ s
>
> **(2) 第二次测量** ($RTT_{sample} = 2.5$)
> *   $RTT_D = (1 - \beta) \times RTT_{D\_old} + \beta \times |RTT_S - RTT_{sample}|$
>     $= 0.75 \times 0.75 + 0.25 \times |1.5 - 2.5| = 0.5625 + 0.25 = 0.8125$ s
> *   $RTT_S = (1 - \alpha) \times RTT_{S\_old} + \alpha \times RTT_{sample}$
>     $= 0.875 \times 1.5 + 0.125 \times 2.5 = 1.3125 + 0.3125 = 1.625$ s
> *   $RTO = RTT_S + 4 \times RTT_D = 1.625 + 4 \times 0.8125 = 1.625 + 3.25 = 4.875$ s

---

### 4. [简答题]

**TCP的拥塞窗口cwnd大小与传输轮次n的关系如下所示：**

![image](https://qn-sc0.yuketang.cn/ue_i/20211205/e7791dd4-9cf5-41eb-ba1b-b821aec090b2.png)

（1）试画出拥塞窗口与传输**轮次的关系曲线。**

** （2）指明TCP工作在慢开始阶段的时间间隔。

（3）指明TCP工作在拥塞避免阶段的时间间隔。

（4）在第16轮次和第22轮次之后发送方是通过收到三个重复的确认还是通过超时检测到丢失了报文段？

（5）在第1轮次，第18轮次和第24轮次发送时，门限ssthresh分别被设置为多大？

（6）在第几轮次发送出第70个报文段？

（7）假定在第26轮次之后收到了三个重复的确认，因而检测出了报文段的丢失，那么拥塞窗口cwnd和门限ssthresh应设置为多大？**

**答案**：

（见解析）

> **解析：**
>
> **(1)** 拥塞窗口曲线如图：
> ![image](https://qn-sc0.yuketang.cn/ue_i/20211205/35bf31f2-b8ea-45e6-ac47-c1d7b41f35e4.png)
>
> **(2) 慢开始阶段**：拥塞窗口指数增长（1 -> 2 -> 4 ...）。
> 区间：**[1, 6]** (cwnd 1 到 32) 和 **[23, 26]** (超时后重新开始，cwnd 1 到 8)。
>
> **(3) 拥塞避免阶段**：拥塞窗口线性增长（+1）。
> 区间：**[6, 16]** (cwnd 32 到 42) 和 **[17, 22]** (cwnd 21 到 26)。
>
> **(4) 丢包检测**：
> *   **第16轮次后**：cwnd 从 42 降为 21 (减半)。这是**收到三个重复确认**（快重传）的特征。
> *   **第22轮次后**：cwnd 从 26 降为 1。这是**超时**的特征。
>
> **(5) 门限 ssthresh**：
> *   **第1轮次**：初始值，由图推断漫开始一直到32，故为 **32**。
> *   **第18轮次**：在第16轮次发生拥塞（cwnd=42），ssthresh = cwnd/2 = **21**。
> *   **第24轮次**：在第22轮次发生超时（cwnd=26），ssthresh = cwnd/2 = **13**。
>
> **(6) 第70个报文段**：
> *   R1: 1 (Total 1)
> *   R2: 2 (Total 3)
> *   R3: 4 (Total 7)
> *   R4: 8 (Total 15)
> *   R5: 16 (Total 31)
> *   R6: 32 (Total 63)
> *   R7: 33 (Total 96)
> *   第 70 个报文段在 **第 7 轮次** 发送。
>
> **(7) 第26轮次后**：
> 发生3个重复确认（快重传）。cwnd = 8。
> *   **ssthresh** = cwnd / 2 = 8 / 2 = **4**。
> *   **cwnd** = ssthresh + 3 (快恢复) = 4 + 3 = 7 （或根据题目风格，可能仅问阈值设为4，窗口也跟随调整）。参考历史解析，设为4。

---

### 5. [填空题]

一台主机H访问互联网中的Web服务器S时，S为新建的TCP连接分配了20KB(K=1024)的接收缓存，最大段长MSS=1KB，平均往返时间RTT=200ms。H建立连接时的初始序号为100，且持续以MSS大小的段向S发送数据，拥塞窗口初始阈值为32KB；S对收到的每个段进行确认，并通告新的接收窗口。假定TCP连接建立完成后，S端的TCP接收缓存仅有数据存入而无数据取出。请回答下列问题：

（1）在TCP连接建立过程中，主机H收到的服务器S发送过来的第二次握手TCP段的标志位SYN= **[填空1]** 、ACK= **[填空2]** ，确认序号= **[填空3]** 。

（2）主机H收到的第8个确认段所通告的接收窗口是 **[填空4]** KB。此时主机H的拥塞窗口变为 **[填空5]** KB，主机H3的发送窗口变为 **[填空6]** KB。

（3）当主机H的发送窗口等于0时，下一个待发送的数据段序号是 **[填空7]** 。主机H3从发送第1个数据段到发送窗口等于0时刻为止，平均数据传输速率是 **[填空8]** kB/s，即 **[填空9]** kb/s。(忽略段的传输延时)。

（4）若主机H与服务器S之间通信已经结束，在t时刻主机H请求断开该连接，则从t时刻起，服务器S释放该连接的最短时间是 **[填空10]** ms。

**答案**：

[1] 1
[2] 1
[3] 101
[4] 12
[5] 9
[6] 9
[7] 20581
[8] 20.48
[9] 163.84
[10] 300

> **解析：**
>
> **(1)** 第二次握手：SYN=1, ACK=1。确认号 = H_ISN + 1 = 100 + 1 = 101。
>
> **(2)**
> *   H收到第8个确认段，说明 S 已经收到了 8 个 MSS 的数据（8KB）。
> *   S 的接收缓存 20KB，存入 8KB，剩余 12KB。通告窗口 **rwnd = 12 KB**。
> *   H 的拥塞窗口：
>     *   开始 cwnd = 1 (MSS)。
>     *   收到 8 个 ACK（慢开始，每收到一个ACK，cwnd+1）。
>     *   cwnd = 1 + 8 = **9 KB**。
> *   H 的发送窗口 = min(cwnd, rwnd) = min(9, 12) = **9 KB**。
>
> **(3)**
> *   当发送窗口 = 0 时，说明 rwnd = 0。即缓存已满（20KB 数据已确认）。
> *   发送了 20 个 MSS。总数据量 20KB = 20480 字节。
> *   下一个序号 = 初始序号 101 + 20480 = **20581**。
> *   传输时间：
>     *   R1 (1个), R2 (2个), R3 (4个), R4 (8个), R5 (5个)。
>     *   总共约 5 个 RTT。（最后一个ACK返回结束）。
>     *   $T = 5 \times 200 \text{ ms} = 1000 \text{ ms} = 1 \text{ s}$。
> *   平均速率 = 20 KB / 1 s = **20 KB/s** = **20.48 kB/s** (注意 k=1000 vs K=1024, 题目中K=1024. 20KB = 20480 Bytes. 20480 / 1000 = 20.48 kB/s)。
> *   比特率 = $20.48 \times 8 = \textbf{163.84} \text{ kb/s}$。
>
> **(4)**
> 释放连接需 1.5 RTT（H发FIN -> S收并回ACK/FIN -> H收并回ACK -> S收ACK关闭）。
> Time = $1.5 \times 200 = 300 \text{ ms}$。

---

## 第14次课测试

### 1. [多选题]

以下关于网络虚拟终端NVT的叙述中，正确的是

A. NVT定义了一种新的终端格式。

B. NVT是一种数据和命令表示的规则集。

C. NVT统一了数据和命令的传输格式。

D. NVT用于Internet上的远程登录服务。

**答案**：B, C, D

> **解析：**
>
> **网络虚拟终端 NVT (Network Virtual Terminal)** 是 Telnet 协议中的一个重要同时也非常基础的概念。
> *   **D 正确**：NVT 是 Telnet 协议（远程登录）为屏蔽不同计算机系统对终端格式差异而定义的一种通用接口。
> *   **B、C 正确**：NVT 定义了通用的数据和命令格式，使得不同类型的终端和主机之间能够互相通信。
> *   **A 不准确**：NVT 并不是一种用来直接显示的“新的终端格式”或物理设备，而是一种抽象的逻辑定义（虚拟接口）。

---

### 2. [填空题]

某网络拓扑如图所示，主机H登录FTP服务器后，向服务器上传一个大小为18000B的文件F。假设H为传输F建立数据连接时，选择的初始序号为100，MSS为1000B。请回答：

（1）FTP的控制连接是持久的还是非持久的？ **[填空1]**

（2）FTP的数据连接是持久的还是非持久的？ **[填空2]**

（3）H登录FTP服务器时，建立的是控制连接还是数据连接？ **[填空3]**

（4）H通过数据连接发送F时，F的第1个字节的序号是多少？ **[填空4]**

（5）H在发送完F后，发送的连接释放报文段中，序号字段的值又是多少？ **[填空5]**

![image](https://yangtse-oplat.xuetangx.com/ue/2023-12-12/45828188/1702351616263-31e740f37425c9b6953d66c0da6b2df.jpg)

**答案**：

[1] 持久的
[2] 非持久的
[3] 控制连接
[4] 101
[5] 18101

> **解析：**
>
> (1) FTP **控制连接**在整个会话期间一直保持打开，是**持久的**。
> (2) FTP **数据连接**在每次文件传输时建立，传输结束即关闭，是**非持久的**。
> (3) 登录、鉴权等控制命令都是通过 **控制连接** 进行的。
> (4) 初始序号 ISN = 100。三次握手消耗一个序号（SYN占1）。所以第一个数据字节的序号是 $100 + 1 = 101$。
> (5)
> *   传输 18000 字节数据。
> *   第一个字节序号 101。
> *   最后一个字节序号 $101 + 18000 - 1 = 18100$。
> *   发送完数据后，H 发送 FIN 释放连接。FIN 报文段的序号等于最后一个传输字节序号 + 1（或者说下一个预期发送的序号）。
> *   序号 = $18100 + 1 = 18101$。

---

### 3. [填空题]

**选择填空（从题后的括号中，选择适当的内容填空）**：

用户1与用户2发送和接收电子邮件的主要过程如下图所示。如果用户1和用户2是使用用户代理收发电子邮件，则图中①、②、③阶段分别使用的应用层协议是 **[填空1]** 、 **[填空2]** 和 **[填空3]** ；如果用户1是登录万维网客户端发送电子邮件，则图中①、②阶段分别使用的应用层协议是 **[填空4]** 、 **[填空5]** 。

**（SMTP、POP3、DNS、FTP、HTTP、TELNET）**

![image](https://rain-oplat.xuetangx.com/ue/2025-12-22/17093220/1766369255424-image.png)

**答案**：

[1] SMTP
[2] SMTP
[3] POP3
[4] HTTP
[5] SMTP

> **解析：**
>
> *   **情景一（客户端软件）**：
>     *   ① 用户代理 -> 发送方邮件服务器：使用 **SMTP**。
>     *   ② 发送方邮件服务器 -> 接收方邮件服务器：使用 **SMTP**。
>     *   ③ 接收方邮件服务器 -> 用户代理：使用 **POP3** (或 IMAP)。
> *   **情景二（Web 邮件）**：
>     *   ① 用户浏览器 -> 邮件服务器（Web Server）：使用 **HTTP**（网页操作）。
>     *   ② 邮件服务器 -> 接收方邮件服务器：服务器之间传输邮件仍使用 **SMTP**。

---

### 4. [简答题]

为什么说FTP是带外传送控制信息？FTP服务器的主进程和从属进程各起什么作用？

**答案**：

（见解析）

> **解析：**
>
> **(1) 带外数据**：
> FTP 使用两个不同的端口号，一个用于**控制连接**（端口21），一个用于**数据连接**（端口20）。控制信息（命令和响应）和数据（文件内容）是分开传输的。因为控制信息不在数据连接的通道中传送，所以被称为**带外 (Out-of-band) 传送**。
>
> **(2) 进程作用**：
> *   **主进程**：负责接受新的请求。它在熟知端口（21）上等待。一旦有连接请求，主进程接受连接，创建一个从属进程来处理该连接，自己继续等待新的请求。
> *   **从属进程** (Worker Process)：负责处理具体的客户请求（如文件传输）。它与客户建立数据连接并完成实际的数据传送任务。

---

### 5. [简答题]

举例说明域名转换的过程。域名服务器中的高速缓存的作用是什么？

**答案**：

（见解析）

> **解析：**
>
> **(1) 域名转换过程**（以递归/迭代查询为例）：
> 1.  主机会先向本地域名服务器查询。
> 2.  如果本地服务器无记录，则向根域名服务器查询。
> 3.  根域名服务器告诉本地域名服务器下一步询问哪个顶级域名服务器 (.com)。
> 4.  本地域名服务器向顶级域名服务器查询。
> 5.  顶级域名服务器告诉它下一步询问哪个权限域名服务器。
> 6.  ...最终找到目标 IP 并返回给主机。
>
> **(2) 高速缓存的作用**：
> *   **提高效率**：存放最近解析过的域名和IP地址映射。当再次查询相同域名时，直接从缓存返回，无需重复查询步骤。
> *   **减轻负载**：大大减少了根域名服务器和互联网上的 DNS 查询报文数量。

---

## 第15次课测试

### 1. [填空题]

当使用鼠标点击一个万维网文档时，若该文档除了有文本外，还有3个.gif图像。设从本地主机到服务器的往返时延是RTTw，文本和图像的传输时延忽略不计。

（1）若使用HTTP/1.0，需建立 **[填空1]** 次TCP连接，将文本和图像下载到本地需要 **[填空2]** 个RTTw。

（2）若使用HTTP/1.1非流水线方式，需建立 **[填空3]** 次TCP连接，将文本和图像下载到本地需要 **[填空4]** 个RTTw。

（3）若使用HTTP/1.1流水线方式，需建立 **[填空5]** 次TCP连接，将文本和图像下载到本地需要 **[填空6]** 个RTTw。

**答案**：

[1] 4
[2] 8
[3] 1
[4] 5
[5] 1
[6] 3

> **解析：**
>
> *   **对象数量**：1 个 HTML 文本 + 3 个图片 = 4 个对象。
>
> **(1) HTTP/1.0 (非持久连接)**
> *   每个对象需要建立一次 TCP 连接。总共 **4 次**连接。
> *   每次连接：建立连接(1 RTT) + 请求/响应(1 RTT) = 2 RTT。
> *   总时延 = $4 \times 2 \text{ RTT} = \textbf{8} \text{ RTT}$。
>
> **(2) HTTP/1.1 (持久连接，非流水线)**
> *   只需建立 **1 次** TCP 连接。
> *   总时延 = 建立连接(1 RTT) + 请求文本(1 RTT) + 请求图片1(1 RTT) + 请求图片2(1 RTT) + 请求图片3(1 RTT)。
> *   总共 $1 + 1 + 3 = \textbf{5} \text{ RTT}$。
>
> **(3) HTTP/1.1 (持久连接，流水线)**
> *   只需建立 **1 次** TCP 连接。
> *   总时延 = 建立连接(1 RTT) + 请求文本(1 RTT) + 请求所有图片(1 RTT，并行发出)。
> *   总共 $1 + 1 + 1 = \textbf{3} \text{ RTT}$。

---

### 2. [简答题]

DHCP协议用在什么情况下？当一台计算机第一次运行引导程序时，其ROM中有没有该主机的IP地址、子网掩码或某个域名服务器的IP地址？为什么？

**答案**：

（见解析）

> **解析：**
>
> **(1) 用途**：
> DHCP (动态主机配置协议) 用于给网络中的主机动态分配 IP 地址和其他配置信息（如子网掩码、默认网关、DNS 服务器等）。它实现了即插即用联网，允许主机加入网络而不需要人工配置。
>
> **(2) ROM 中是否有 IP 信息？**
> **没有**。
>
> **(3) 为什么**：
> 因为 ROM 中的信息是厂家在生产计算机（或网卡）时预先写入的（如 MAC 地址）。而 IP 地址是逻辑地址，取决于计算机连接到哪个具体网络，厂家无法预先知道计算机将来会连接到哪个网络，因此无法预置 IP 地址等网络配置信息。

---

### 3. [简答题]

（6-46）下图表示了各个应用协议在层次中的位置。

（1）简单讨论一下为什么有的应用层协议要使用TCP而有的却要使用UDP?

（2）为什么MIME画在SMTP之上？

（3）为什么路由选择协议RIP放在应用层？

![image](https://qn-sc0.yuketang.cn/ue_i/20211219/9173c587-e10f-48a2-9411-b54f7b3fa4ae.png)

**答案**：

（见解析）

> **解析：**
>
> **(1) TCP vs UDP**
> *   应用层协议根据不同的通信需求选择传输层协议。
> *   如果应用需要**可靠交付**（数据不丢失、不重复、按序到达），如文件传输 (FTP)、邮件 (SMTP)、网页 (HTTP)，则使用 **TCP**。虽然开销大，但能保证数据正确性。
> *   如果应用需要**实时性**高、通信效率高，能容忍少量丢失（如多媒体流），或者通信量很小（如 DNS 查询、RIP），则使用 **UDP**。UDP 无连接，开销小。
>
> **(2) MIME 与 SMTP**
> *   **SMTP** 最初只能传送 7 位 ASCII 码文本，无法传输二进制文件（如图片、视频）或非英语字符。
> *   **MIME** (多用途互联网邮件扩展) 是一种数据转换规范，它将非 ASCII 数据转换为 SMTP 可以传输的 ASCII 格式。
> *   逻辑上 MIME 位于 SMTP 之上，是对 SMTP 的扩展和补充，数据先经 MIME 编码再交给 SMTP 传输。
>
> **(3) RIP**
> *   **RIP** (路由信息协议) 虽然是网络层的路由协议，但它使用 **UDP** 协议进行报文传输（端口 520）。
> *   在协议栈的分层模型中，运行在 UDP 之上的协议通常被视为应用层协议。但从功能上看，它是服务于网络层路由选择的。

---

