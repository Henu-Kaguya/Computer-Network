# 第三章 数据链路层

### 3.1 单选题

数据链路层的主要功能是

* A. 为终端用户提供端到端的传输服务
* B. 为应用进程提供网络服务
* C. 为分组在网络中的路由选择路径
* D. 在两个相邻结点间的链路上传送以帧为单位的数据

**答案**：**D**

> **解析：**
>
> * A 和 B 是传输层或应用层的功能。
> * C 是网络层（IP 层）的功能。
> * **D. 在两个相邻结点间的链路上传送以帧为单位的数据**：这是数据链路层的标准定义。

---

### 3.2 填空题

数据链路层协议有许多种，但有三个基本问题则是共同的，这三个基本问题是 [填空1]、[填空2] 和 [填空3]。

**答案**：**封装成帧；透明传输；差错检测**

> **解析：**
>
> * **封装成帧 (Framing)**：在一段数据前后添加首部和尾部，确定帧的界限。
> * **透明传输 (Transparent Transmission)**：采取措施（如字节填充）解决数据中出现帧定界符导致误判的问题，确保任何数据都能传输。
> * **差错检测 (Error Detection)**：如使用 CRC 循环冗余校验，丢弃传输中出现误码的帧。

---

### 3.3 多选题

PPP 协议应满足的需求有

* A. 简单
* B. 封装成帧
* C. 透明性
* D. 差错检测
* E. 支持多点线路
* F. 支持多种网络层协议

**答案**：**A, B, C, D, F**

> **解析：**
> IETF 在设计 PPP（点对点协议）时确定的主要需求包括：
>
> * **简单**（A）：这是首要需求。
> * **封装成帧**（B）：必须规定特殊的帧定界符。
> * **透明性**（C）：必须保证数据传输的透明性（如字节填充）。
> * **多种网络层协议**（F）：必须能在同一条物理链路上同时支持多种网络层协议（如 IP, IPX 等）。
> * **差错检测**（D）：必须能对接收端收到的帧进行检测（CRC）。
> * **E 错误**：PPP 是 Point-to-Point Protocol，明确是**点对点**的，**不支持**多点线路（那是总线型网络的需求）。

---

### 3.4 填空题

发送的数据为 101001 ，采用 CRC 的生成多项式是 $P(x)=x^3+x^2+1$ ，求添加在数据后面的余数是 [填空1]

**答案**：**001**

> **解析：**
>
> 1. **确定除数**：生成多项式 $P(x)=x^3+x^2+1$ ，对应的二进制码为 1101 （系数为 1,1,0,1 ）。
> 2. **确定被除数**：发送数据为 $M=101001$ ，因为生成多项式的最高次幂是 3，所以在数据后面补 3 个 0，被除数变为 101001000 。
> 3. **模2除法运算**（异或运算）：
>
> * $101001000 / 1101$
> * 第1步：$1010 \text{ XOR } 1101 = 0111$ ，余数 111 ；落下后一位 0 ，变为 1110 。
> * 第2步：$1110 \text{ XOR } 1101 = 0011$ ，余数 11 ；落下后一位 1 ，变为 111 （不够除，商0）；再落后一位 0 ，变为 1110 。
> * 第3步：$1110 \text{ XOR } 1101 = 0011$ ，余数 11 ；落下后一位 0 ，变为 110 （不够除）；再落后一位 0 ，变为 1100 。
> * 第4步：$1100 \text{ XOR } 1101 = 0001 (001)$ \dots
>
> 4. **结果**：余数为 **001**。

---

### 3.5 填空题

一个 PPP 的数据部分（用十六进制写出）是 7D 5E FE 27 7D 5D 7D 5D 65 7D 5E。试问真正的数据是 [填空1] （用十六进制写出）。

**答案**：**7E FE 27 7D 7D 65 7E**

> **解析：**
> PPP 协议在异步传输时使用**字节填充法**。转义字符是 `0x7D`。
> 规则：
>
> 1. 见到 `7E`，转义为 `7D 5E`。
> 2. 见到 `7D`，转义为 `7D 5D`。
> 3. 还原时：见到 `7D`，将其丢弃，并将后一个字节与 `0x20` 进行异或（XOR）运算。
>
> **还原过程**：
>
> * `7D 5E` -> 丢弃 7D，`5E` XOR `20` = **7E**
> * `FE` -> 保持不变 = **FE**
> * `27` -> 保持不变 = **27**
> * `7D 5D` -> 丢弃 7D，`5D` XOR `20` = **7D**
> * `7D 5D` -> 丢弃 7D，`5D` XOR `20` = **7D**
> * `65` -> 保持不变 = **65**
> * `7D 5E` -> 丢弃 7D，`5E` XOR `20` = **7E**
>
> 最终结果：**7E FE 27 7D 7D 65 7E**

---

### 3.6 单选题

HDLC 协议对 01111100 01111110 组帧后对应的比特串为

* A. 01111100 01111110
* B. 01111100 01111101 0
* C. 01111100 01111100 0
* D. 01111100 01111101

**答案**：**B**

> **解析：**
>
> > HDLC 采用**零比特填充法**（Bit Stuffing）来实现透明传输：**只要发现 5 个连续的 1，就在其后插入一个 0**。
> >
>
> 原始数据：`01111100 01111110`
>
> 1. 扫描第一段 `011111...`：发现 5 个 1，插入 0  `0111110`。
> 2. 接下来的比特是 `00`  结果变为 `011111000`。
> 3. 继续扫描 `011111...`：发现 5 个 1，插入 0  `0111110`。
> 4. 接下来的比特是 `10`  结果变为 `...011111010`。
>
> 组合起来：`011111000` + `011111010` = `01111100011111010`。
> 对应选项 B（注：选项 B 中间有空格 `01111100 01111101 0`，去掉空格后与计算结果一致）。

---

### 3.7 多选题

局域网的拓扑结构主要有

* A. 星形网
* B. 环形网
* C. 总线网
* D. 树形网

**答案**：**A, B, C, D**

> **解析：**
>
> > 常见的局域网拓扑结构包括：
> >
>
> * **A. 星形**：目前最主流的结构（使用集线器或交换机为中心）。
> * **B. 环形**：如令牌环网（Token Ring）。
> * **C. 总线形**：早期使用同轴电缆的以太网。
> * **D. 多级星形**（或树形）：通过交换机级联形成的扩展星形结构，广泛用于大型局域网。

---

### 3.8 多选题

局域网可使用的传输媒体有

* A. 双绞线
* B. 同轴电缆
* C. 光纤
* D. 无线信道

**答案**：**A, B, C, D**

> **解析：**
> 局域网（LAN）技术发展至今，支持多种介质：
>
> * **A. 双绞线**：现代以太网最常用的介质（如 Cat5e, Cat6）。
> * **B. 同轴电缆**：早期以太网（如 10Base2, 10Base5）使用，现在主要用于有线电视网络接入。
> * **C. 光纤**：用于高速局域网或长距离连接（光纤以太网）。
> * **D. 无线微波信道**：无线局域网（WLAN/Wi-Fi）使用微波频段（2.4GHz, 5GHz）进行传输。

---

### 3.9 单选题

以太网采用的共享信道技术是

* A. 频分复用
* B. 时分复用
* C. 随机接入
* D. 受控接入

**答案**：**C**

> **解析：**
> 以太网（Ethernet）使用 **CSMA/CD**（载波监听多点接入/碰撞检测）协议，这属于**随机接入 (Random Access)** 技术。
>
> * A. 频分复用 (FDM) 和 B. 时分复用 (TDM) 是静态划分信道技术。
> * D. 受控接入 (Controlled Access) 是如令牌环网（Token Ring）使用的技术。

---

### 3.10 单选题

网络适配器实现了体系结构中哪层的功能

* A. 物理层
* B. 数据链路层
* C. 物理层和数据链路层
* D. 网络层

**答案**：**C**

> **解析：**
> 网络适配器（Network Adapter），通常指网卡（NIC）。
> 它不仅要处理物理接口的电信号转换（**物理层**功能），还要处理帧的封装、解封、MAC地址识别以及CSMA/CD协议的执行（**数据链路层**功能）。因此它跨越了物理层和数据链路层。

---

### 3.11 单选题

从数据链路层发送的帧要包含物理地址，该地址是

* A. 由用户指定的
* B. 由网络管理员分配的
* C. 存储在网卡 ROM 中的
* D. 存储在网卡 RAM 中的

**答案**：**C**

> **解析：**
> 物理地址即 MAC 地址（硬件地址）。
>
> * MAC 地址在生产时被固化在网卡的 **ROM**（只读存储器）中。
> * 当计算机启动或网卡初始化时，该地址被读取，并由驱动程序（软件）将其放置在待发送帧的首部（MAC帧头）中。
> * 选项 A 和 B 错误，因为 MAC 地址通常不是由高层软件任意或按规则构造的（那是逻辑地址/IP地址的特性），而是硬件固有的（尽管现代网卡允许软件修改欺骗，但题目考察的是标准原理）。
> * 选项 D 错误，MAC 地址存储在 ROM 中，而不是 RAM（掉电丢失）中。

---

### 3.12 单选题

以太网的数据链路层协议是

* A. PPP
* B. CSMA/CA
* C. CSMA/CD
* D. CDMA

**答案**：**C**

> **解析：**
>
> * **CSMA/CD** (Carrier Sense Multiple Access with Collision Detection)：载波监听多点接入/碰撞检测，是**有线以太网**（IEEE 802.3）的核心协议。
> * **CSMA/CA**：用于无线局域网（Wi-Fi, 802.11）。
> * **CDMA**：码分多址，主要用于移动通信网络（3G等）。

---

### 3.13 填空题

假定 1km 长的 CSMA/CD 网络的数据率为 1Gbit/s。设信号在网络上的传播速度为 200000km/s。能够使用此协议的最短帧长是 [填空1] 字节。

**答案**：**1250**

> **解析：**
> CSMA/CD 协议为了保证碰撞检测（Collision Detection），要求**最短帧长**必须大于等于**争用期**内发送的比特数。
>
> 1. **计算单程传播时间 ($\tau$)**：
>    $\tau = \text{Distance} / \text{Speed} = 1 \text{ km} / 200000 \text{ km/s} = 5 \times 10^{-6} \text{ s} = 5 \mu s$
> 2. **计算争用期 ($2\tau$)**：
>    $2\tau = 2 \times 5 \mu s = 10 \mu s$
> 3. **计算最短帧长 (bit)**：
>    $L_{min} = 2\tau \times \text{DataRate} = 10 \times 10^{-6} \text{ s} \times 1 \times 10^9 \text{ b/s} = 10000 \text{ bit}$
> 4. **转换为字节 (Byte)**：
>    $10000 / 8 = 1250 \text{ Byte}$

---

### 3.14 多选题

所谓名字是指（ ），名字与系统所在地（ ）。

* A. 资源的标识
* B. 资源的地址
* C. 与系统所在地有关
* D. 与系统所在地无关

**答案**：**A, D**

> **解析：**
> 这是一个关于分布式系统或网络体系结构中“命名、寻址和路由”的经典定义：
>
> 1. **名字 (Name)**：标识**所要寻找的资源**是什么（What）。
> 2. **地址 (Address)**：标识**资源在何处**（Where）。
> 3. **路由 (Route)**：标识**如何到达该处**（How）。
>
> 理想情况下，名字应该是**位置无关**的（即与系统所在地**无关**），这样即使资源移动了位置（地址变了），名字依然有效。

---

### 3.15 多选题

用集线器扩展以太网，可以

**答案**：**A, B**

> **解析：**
> 集线器（Hub）工作在物理层。
>
> * **A. 扩大网络覆盖的地理范围**：正确，集线器作为中继器，可以对信号进行整形放大，延长传输距离。
> * **B. 增大碰撞域**：正确（但这通常是缺点）。集线器将多个网段连成一个更大的网段，所有连接的设备属于同一个碰撞域（冲突域）。
> * C. 提高吞吐量：错误。集线器是共享带宽设备，连接的设备越多，每个设备分到的平均带宽越小，总吞吐量受限于碰撞，不会提高。
> * D. 互连不同数据率的网络：错误。集线器无法缓存数据，不能连接速率不同的网段（如 10Mb/s 和 100Mb/s 不能直接用 Hub 连）。

---

### 3.16 单选题

以太网交换机进行转发决策时使用的 PDU 地址是

* A. 目的物理地址
* B. 源物理地址
* C. 目的 IP 地址
* D. 源 IP 地址

**答案**：**A**

> **解析：**
> 接上一题（3.17）的解析：
>
> * **转发决策**：交换机在转发表中查找帧的**目的物理地址 (Destination MAC)**。如果找到，就从对应端口转发；如果没找到，就向除入端口外的所有端口广播（泛洪）。

---

### 3.17 单选题

以太网交换机构建转发表时使用的 PDU 地址是

* A. 目的物理地址
* B. 目的 IP 地址
* C. 源物理地址
* D. 源 IP 地址

**答案**：**C**

> **解析：**
>
> > 交换机通过**自学习算法**建立转发表（MAC地址表）：
> >
>
> * **学习过程**：当交换机收到一个帧时，它查看帧的**源物理地址 (Source MAC)**，并将该地址与接收到该帧的端口号进行映射记录。
> * **转发过程**：当交换机转发帧时，才查看**目的物理地址**。
>
> 题目问的是“构建”转发表，因此依据是**源物理地址**。

---

### 3.18 单选题

下列关于虚拟局域网 VLAN 的描述，错误的是

* A. VLAN 是基于逻辑分组的，不受物理位置限制
* B. VLAN 帧会插入一个包含 VLAN ID 的 Tag
* C. 虚拟局域网 (VLAN) 是一种新型的局域网
* D. VLAN 能够限制广播域

**答案**：**C**

> **解析：**
>
> * A 正确：VLAN 是基于逻辑分组的，不受物理位置限制。
> * B 正确：在 802.1Q 标准中，VLAN 帧会插入一个 Tag，其中包含 VLAN ID（标识符）。
> * **C 错误**：**虚拟局域网（VLAN）并不是一种新型的局域网**（即它不是像以太网、令牌环网那样的新物理层/链路层技术），而是在现有的局域网技术上，通过软件配置实现的一种**管理功能**或服务。
> * D 正确：VLAN 是局域网提供给用户的一种服务，用于分割广播域。

---

### 3.19 单选题

对于 100Mbps 的以太网交换机，当输出端口无排队，以直通交换 (cut-through switching) 方式转发一个以太网帧（不包括前导码）时，引入的转发延迟至少是

* A. 0.48 ms
* B. 0.48 $\mu s$
* C. 48 $\mu s$
* D. 4.8 $\mu s$

**答案**：**B**

> **解析：**
> 直通交换（Cut-through）是指交换机只要接收到帧的**目的 MAC 地址**，就开始转发，而不需要等到整个帧接收完毕。
>
> * 以太网帧的目的 MAC 地址位于帧的最前端，长度为 **6 字节**（48比特）。
> * 带宽为 100Mbps。
> * 延迟计算：$t = \text{AddressSize} / \text{Bandwidth} = 48 \text{ bit} / (100 \times 10^6 \text{ bps}) = 0.48 \times 10^{-6} \text{ s} = 0.48 \mu s$。

---

### 3.20 填空题

假定在使用 CSMA/CD 协议的 10Mb/s 以太网中某个站在发送数据时检测到碰撞，执行退避算法时选择了随机数 r = 100。试问这个站需要等待多少 $\mu s$ 后才能再次发送数据？ [填空1] 如果是 100Mb/s 的以太网呢？ [填空2] $\mu s$

**答案**：**5120；512**

> **解析：**
>
> > 以太网采用截断二进制指数退避算法。退避时间 = 基本退避时间 $\times$ 随机数 $r$。
> > 基本退避时间取值为争用期（Slot time），即 512 比特时间（$2\tau$）。
> >
>
> 1. **对于 10Mb/s 以太网**：
>
> * 1个比特时间 = $1 / 10 \text{ Mb/s} = 0.1 \mu s$
> * 争用期（Slot time）= $512 \times 0.1 \mu s = 51.2 \mu s$
> * 等待时间 = $r \times 51.2 \mu s = 100 \times 51.2 = 5120 \mu s$
>
> 2. **对于 100Mb/s 以太网**：
>
> * 1个比特时间 = $1 / 100 \text{ Mb/s} = 0.01 \mu s$
> * 争用期（Slot time）= $512 \times 0.01 \mu s = 5.12 \mu s$
> * 等待时间 = $r \times 5.12 \mu s = 100 \times 5.12 = 512 \mu s$

---

### 14 (18年考研34题)  单选题

在 ISO/OSI 参考模型中，实现两个相邻结点间流量控制功能的是 ( )。

* A. 物理层
* B. 数据链路层
* C. 网络层
* D. 传输层

**答案**：**B**

> **解析：**
>
> > * **数据链路层 (Data Link Layer)**：负责在两个**相邻结点**（node-to-node）间的链路上无差错地传送以**帧**为单位的数据，其功能包括**流量控制**、差错控制等。
> >
>
> * 传输层：负责**端到端**（end-to-end）的流量控制。
> * 网络层：主要负责路由选择和拥塞控制。
