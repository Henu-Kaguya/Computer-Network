# 第6次课测试

### 1. [单选题]

在一个采用CSMA/CD协议的网络中，传输介质是一根完整的电缆，传输速率为1Gbps，电缆中的信号传播速度是200000km/s。若最小数据帧长减少800比特，则最远的两个站点之间的距离至少需要

A. 增加160m

B. 增加80m

C. 减少160m

D. 减少80m

**答案**：D

> **解析：**
>
> 在 CSMA/CD 协议中，为了保证碰撞检测，最小帧长 $L_{min}$ 必须满足：
> $L_{min} \ge 2 \tau R$
> 其中 $\tau$ 是单程传播时延，$R$ 是数据传输速率。
> 而 $\tau = D / v$，其中 $D$ 是最大距离，$v$ 是信号传播速度。
> 代入公式：
> $L_{min} = 2 (D/v) R \implies D = \frac{L_{min} \cdot v}{2R}$
>
> 当最小帧长减少 $\Delta L = 800$ 比特时，距离的变化量 $\Delta D$ 为：
> $\Delta D = \frac{\Delta L \cdot v}{2R}$
> $v = 200000 \text{km/s} = 2 \times 10^8 \text{m/s}$
> $R = 1\text{Gbps} = 10^9 \text{b/s}$
> $\Delta L = -800 \text{bits}$ (减少)
>
> $\Delta D = \frac{-800 \times 2 \times 10^8}{2 \times 10^9} = \frac{-16 \times 10^{10}}{2 \times 10^9} = -80 \text{m}$
>
> 所以最远距离需要**减少 80m**。

---

### 2. [填空题]

数据率为10Mbit/s的以太网在物理媒体上的码元传输速率是 **[填空1]** 码元/秒。

**答案**：

[1] 20M / 20000000

> **解析：**
>
> 10Base-T 以太网使用**曼彻斯特编码**。在曼彻斯特编码中，每一位（bit）中间都有一次电平跳变（从低到高或从高到低），即每个比特包含两个码元（脉冲）。
> 因此，码元传输速率（波特率）是数据传输速率（比特率）的 2 倍。
> $10 \text{Mbit/s} \times 2 = 20 \text{Mbaud}$。

---

### 3. [填空题]

当数据率是10Mbit/s时，100比特时间是 **[填空1]** 微秒？

**答案**：

[1] 10

> **解析：**
>
> 比特时间 = 比特数量 / 数据率
> $t = 100 \text{ bit} / 10 \text{ Mb/s} = 100 / (10 \times 10^6) \text{ s} = 10 \times 10^{-6} \text{ s} = 10 \mu\text{s}$。

---

### 4. [简答题]

假定站点A和B在同一个10Mb/s以太网网段上。这两个站点之间的传播时延为225比特时间。回答下列问题：

（1）现假定A开始发送一帧，并且在A发送结束之前B也发送一帧。如果A发送的是以太网所容许的最短的帧，那么A在检测到和B发生碰撞之前能否把自己的数据发送完毕？换言之，如果A在发送完毕之前并没有检测到碰撞，那么能否肯定A所发送的帧不会和B发送的帧发生碰撞？（提示：在计算时应当考虑到每一个以太网帧在发送到信道上时，在MAC帧前面还要增加若干字节的前同步码和帧定界符）

（2）假定站点A和B在t=0时同时发送了数据帧。当t=225比特时间，A和B同时检测到发生了碰撞，并且在t=225+48=273比特时间完成了干扰信号的传输。A和B在CSMA/CD算法中选择不同的r值退避。假定A和B选择的随机数分别是rA=0和rB=1。试问A和B各在什么时间开始重传其数据帧？A重传的数据帧在什么时间到达B？A重传的数据会不会和B重传的数据再次发生碰撞？B会不会在预定的重传时间停止发送数据？

**答案**：

（见解析）

> **解析：**
>
> **（1）**
> *   以太网最短MAC帧长为 64 字节（512比特）。加上 8 字节的前同步码和帧定界符，实际发送长度为 72 字节 = 576 比特。
> *   因此，A 发送完毕需要 **576 比特时间**。
> *   传播时延 $\tau = 225$ 比特时间。往返传播时延 $2\tau = 450$ 比特时间。
> *   如果发生碰撞，碰撞信号传回 A 的最晚时间是 $2\tau = 450$ 比特时间。
> *   因为 $576 > 450$，即 A 的发送时间大于争用期。
> *   **结论**：在 A 发送完毕之前（576比特时间），如果发生碰撞，A 一定能检测到（因为最晚在450比特时间就能检测到）。反之，如果 A 在发送完毕之前没有检测到碰撞，就能够肯定 A 所发送的帧不会和 B 发送的帧发生碰撞。
>
> **（2）**
> *   $t=0$：A、B开始发送。
> *   $t=225$：A、B检测到碰撞（因为传播时延是225）。
> *   $t=273$：A、B完成 48 比特的人为干扰信号传输。此时A、B停止发送，开始退避算法。
> *   **A的重传**：
>     *   A选择 $r_A=0$。退避时间 $0 \times 512 = 0$。
>     *   但是，CSMA/CD规定，必须在信道空闲 96 比特时间（帧间最小间隔）后才能发送。
>     *   A 在 $t=273$ 停止发送。此时信道上有 B 的干扰信号传输过来。B 的干扰信号在 $t=273$ 发完，传播到 A 需要 225 比特时间。
>     *   所以在 $t = 273 + 225 = 498$ 时，A 才能检测到信道空闲。
>     *   A 需要再等待 96 比特时间。
>     *   **A 开始重传时间**：$t_A = 498 + 96 = 594$ 比特时间。
> *   **B的重传**：
>     *   B选择 $r_B=1$。退避时间 $1 \times 512 = 512$ 比特时间。
>     *   B 也在 $t=498$ 检测到信道空闲。
>     *   B 应该在 $t = 498 + 512 = 1010$ 附近准备发送？
>     *   通常退避时间是从由于冲突而停止发送的时刻算起，还是要加上帧间间隔？
>     *   **更精确的计算**：
>         *   $t=273$，干扰信号发完。
>         *   信道变为空闲的时刻：
>             *   对于 A：B 的干扰信号尾部到达 A 的时刻 = $273 + 225 = 498$。
>             *   对于 B：A 的干扰信号尾部到达 B 的时刻 = $273 + 225 = 498$。
>         *   A 准备发送时刻：$498 + 96(\text{IFG}) + 0(\text{Backoff}) = 594$。
>         *   B 准备发送时刻：$498 + 96(\text{IFG}) + 512(\text{Backoff}) = 1106$。
> *   **碰撞分析**：
>     *   A 在 $t=594$ 开始重传数据。
>     *   A 的数据头到达 B 的时间：$594 + 225 = 819$。
>     *   B 在 $t=819$ 时检听到信道变忙（收到A的重传数据）。
>     *   B 预定的发送时间是 $1106$。
>     *   因为 $819 < 1106$，B 在轮到自己发送之前就检测到信道忙。
>     *   **结论**：B 会执行载波监听（CS），发现信道忙，因此 **B 不会发送数据**，而是挂起等待信道空闲。所以 **不会再次发生碰撞**。

---
