# 第15次课测试

### 1. [填空题]

当使用鼠标点击一个万维网文档时，若该文档除了有文本外，还有3个.gif图像。设从本地主机到服务器的往返时延是RTTw，文本和图像的传输时延忽略不计。

（1）若使用HTTP/1.0，需建立 **[填空1]** 次TCP连接，将文本和图像下载到本地需要 **[填空2]** 个RTTw。

（2）若使用HTTP/1.1非流水线方式，需建立 **[填空3]** 次TCP连接，将文本和图像下载到本地需要 **[填空4]** 个RTTw。

（3）若使用HTTP/1.1流水线方式，需建立 **[填空5]** 次TCP连接，将文本和图像下载到本地需要 **[填空6]** 个RTTw。

**答案**：

[1] 4
[2] 8
[3] 1
[4] 5
[5] 1
[6] 3

> **解析：**
>
> *   **对象数量**：1 个 HTML 文本 + 3 个图片 = 4 个对象。
>
> **(1) HTTP/1.0 (非持久连接)**
> *   每个对象需要建立一次 TCP 连接。总共 **4 次**连接。
> *   每次连接：建立连接(1 RTT) + 请求/响应(1 RTT) = 2 RTT。
> *   总时延 = $4 \times 2 \text{ RTT} = \textbf{8} \text{ RTT}$。
>
> **(2) HTTP/1.1 (持久连接，非流水线)**
> *   只需建立 **1 次** TCP 连接。
> *   总时延 = 建立连接(1 RTT) + 请求文本(1 RTT) + 请求图片1(1 RTT) + 请求图片2(1 RTT) + 请求图片3(1 RTT)。
> *   总共 $1 + 1 + 3 = \textbf{5} \text{ RTT}$。
>
> **(3) HTTP/1.1 (持久连接，流水线)**
> *   只需建立 **1 次** TCP 连接。
> *   总时延 = 建立连接(1 RTT) + 请求文本(1 RTT) + 请求所有图片(1 RTT，并行发出)。
> *   总共 $1 + 1 + 1 = \textbf{3} \text{ RTT}$。

---

### 2. [简答题]

DHCP协议用在什么情况下？当一台计算机第一次运行引导程序时，其ROM中有没有该主机的IP地址、子网掩码或某个域名服务器的IP地址？为什么？

**答案**：

（见解析）

> **解析：**
>
> **(1) 用途**：
> DHCP (动态主机配置协议) 用于给网络中的主机动态分配 IP 地址和其他配置信息（如子网掩码、默认网关、DNS 服务器等）。它实现了即插即用联网，允许主机加入网络而不需要人工配置。
>
> **(2) ROM 中是否有 IP 信息？**
> **没有**。
>
> **(3) 为什么**：
> 因为 ROM 中的信息是厂家在生产计算机（或网卡）时预先写入的（如 MAC 地址）。而 IP 地址是逻辑地址，取决于计算机连接到哪个具体网络，厂家无法预先知道计算机将来会连接到哪个网络，因此无法预置 IP 地址等网络配置信息。

---

### 3. [简答题]

（6-46）下图表示了各个应用协议在层次中的位置。

（1）简单讨论一下为什么有的应用层协议要使用TCP而有的却要使用UDP?

（2）为什么MIME画在SMTP之上？

（3）为什么路由选择协议RIP放在应用层？

![image](https://qn-sc0.yuketang.cn/ue_i/20211219/9173c587-e10f-48a2-9411-b54f7b3fa4ae.png)

**答案**：

（见解析）

> **解析：**
>
> **(1) TCP vs UDP**
> *   应用层协议根据不同的通信需求选择传输层协议。
> *   如果应用需要**可靠交付**（数据不丢失、不重复、按序到达），如文件传输 (FTP)、邮件 (SMTP)、网页 (HTTP)，则使用 **TCP**。虽然开销大，但能保证数据正确性。
> *   如果应用需要**实时性**高、通信效率高，能容忍少量丢失（如多媒体流），或者通信量很小（如 DNS 查询、RIP），则使用 **UDP**。UDP 无连接，开销小。
>
> **(2) MIME 与 SMTP**
> *   **SMTP** 最初只能传送 7 位 ASCII 码文本，无法传输二进制文件（如图片、视频）或非英语字符。
> *   **MIME** (多用途互联网邮件扩展) 是一种数据转换规范，它将非 ASCII 数据转换为 SMTP 可以传输的 ASCII 格式。
> *   逻辑上 MIME 位于 SMTP 之上，是对 SMTP 的扩展和补充，数据先经 MIME 编码再交给 SMTP 传输。
>
> **(3) RIP**
> *   **RIP** (路由信息协议) 虽然是网络层的路由协议，但它使用 **UDP** 协议进行报文传输（端口 520）。
> *   在协议栈的分层模型中，运行在 UDP 之上的协议通常被视为应用层协议。但从功能上看，它是服务于网络层路由选择的。

---
