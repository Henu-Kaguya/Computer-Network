# 第14次课测试

### 1. [多选题]

以下关于网络虚拟终端NVT的叙述中，正确的是

A. NVT定义了一种新的终端格式。

B. NVT是一种数据和命令表示的规则集。

C. NVT统一了数据和命令的传输格式。

D. NVT用于Internet上的远程登录服务。

**答案**：B, C, D

> **解析：**
>
> **网络虚拟终端 NVT (Network Virtual Terminal)** 是 Telnet 协议中的一个重要同时也非常基础的概念。
> *   **D 正确**：NVT 是 Telnet 协议（远程登录）为屏蔽不同计算机系统对终端格式差异而定义的一种通用接口。
> *   **B、C 正确**：NVT 定义了通用的数据和命令格式，使得不同类型的终端和主机之间能够互相通信。
> *   **A 不准确**：NVT 并不是一种用来直接显示的“新的终端格式”或物理设备，而是一种抽象的逻辑定义（虚拟接口）。

---

### 2. [填空题]

某网络拓扑如图所示，主机H登录FTP服务器后，向服务器上传一个大小为18000B的文件F。假设H为传输F建立数据连接时，选择的初始序号为100，MSS为1000B。请回答：

（1）FTP的控制连接是持久的还是非持久的？ **[填空1]**

（2）FTP的数据连接是持久的还是非持久的？ **[填空2]**

（3）H登录FTP服务器时，建立的是控制连接还是数据连接？ **[填空3]**

（4）H通过数据连接发送F时，F的第1个字节的序号是多少？ **[填空4]**

（5）H在发送完F后，发送的连接释放报文段中，序号字段的值又是多少？ **[填空5]**

![image](https://yangtse-oplat.xuetangx.com/ue/2023-12-12/45828188/1702351616263-31e740f37425c9b6953d66c0da6b2df.jpg)

**答案**：

[1] 持久的
[2] 非持久的
[3] 控制连接
[4] 101
[5] 18101

> **解析：**
>
> (1) FTP **控制连接**在整个会话期间一直保持打开，是**持久的**。
> (2) FTP **数据连接**在每次文件传输时建立，传输结束即关闭，是**非持久的**。
> (3) 登录、鉴权等控制命令都是通过 **控制连接** 进行的。
> (4) 初始序号 ISN = 100。三次握手消耗一个序号（SYN占1）。所以第一个数据字节的序号是 $100 + 1 = 101$。
> (5)
> *   传输 18000 字节数据。
> *   第一个字节序号 101。
> *   最后一个字节序号 $101 + 18000 - 1 = 18100$。
> *   发送完数据后，H 发送 FIN 释放连接。FIN 报文段的序号等于最后一个传输字节序号 + 1（或者说下一个预期发送的序号）。
> *   序号 = $18100 + 1 = 18101$。

---

### 3. [填空题]

**选择填空（从题后的括号中，选择适当的内容填空）**：

用户1与用户2发送和接收电子邮件的主要过程如下图所示。如果用户1和用户2是使用用户代理收发电子邮件，则图中①、②、③阶段分别使用的应用层协议是 **[填空1]** 、 **[填空2]** 和 **[填空3]** ；如果用户1是登录万维网客户端发送电子邮件，则图中①、②阶段分别使用的应用层协议是 **[填空4]** 、 **[填空5]** 。

**（SMTP、POP3、DNS、FTP、HTTP、TELNET）**

![image](https://rain-oplat.xuetangx.com/ue/2025-12-22/17093220/1766369255424-image.png)

**答案**：

[1] SMTP
[2] SMTP
[3] POP3
[4] HTTP
[5] SMTP

> **解析：**
>
> *   **情景一（客户端软件）**：
>     *   ① 用户代理 -> 发送方邮件服务器：使用 **SMTP**。
>     *   ② 发送方邮件服务器 -> 接收方邮件服务器：使用 **SMTP**。
>     *   ③ 接收方邮件服务器 -> 用户代理：使用 **POP3** (或 IMAP)。
> *   **情景二（Web 邮件）**：
>     *   ① 用户浏览器 -> 邮件服务器（Web Server）：使用 **HTTP**（网页操作）。
>     *   ② 邮件服务器 -> 接收方邮件服务器：服务器之间传输邮件仍使用 **SMTP**。

---

### 4. [简答题]

为什么说FTP是带外传送控制信息？FTP服务器的主进程和从属进程各起什么作用？

**答案**：

（见解析）

> **解析：**
>
> **(1) 带外数据**：
> FTP 使用两个不同的端口号，一个用于**控制连接**（端口21），一个用于**数据连接**（端口20）。控制信息（命令和响应）和数据（文件内容）是分开传输的。因为控制信息不在数据连接的通道中传送，所以被称为**带外 (Out-of-band) 传送**。
>
> **(2) 进程作用**：
> *   **主进程**：负责接受新的请求。它在熟知端口（21）上等待。一旦有连接请求，主进程接受连接，创建一个从属进程来处理该连接，自己继续等待新的请求。
> *   **从属进程** (Worker Process)：负责处理具体的客户请求（如文件传输）。它与客户建立数据连接并完成实际的数据传送任务。

---

### 5. [简答题]

举例说明域名转换的过程。域名服务器中的高速缓存的作用是什么？

**答案**：

（见解析）

> **解析：**
>
> **(1) 域名转换过程**（以递归/迭代查询为例）：
> 1.  主机会先向本地域名服务器查询。
> 2.  如果本地服务器无记录，则向根域名服务器查询。
> 3.  根域名服务器告诉本地域名服务器下一步询问哪个顶级域名服务器 (.com)。
> 4.  本地域名服务器向顶级域名服务器查询。
> 5.  顶级域名服务器告诉它下一步询问哪个权限域名服务器。
> 6.  ...最终找到目标 IP 并返回给主机。
>
> **(2) 高速缓存的作用**：
> *   **提高效率**：存放最近解析过的域名和IP地址映射。当再次查询相同域名时，直接从缓存返回，无需重复查询步骤。
> *   **减轻负载**：大大减少了根域名服务器和互联网上的 DNS 查询报文数量。

---
