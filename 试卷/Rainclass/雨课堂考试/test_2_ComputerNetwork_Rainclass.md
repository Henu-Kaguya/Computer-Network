# 第2次课测试

### 1. [单选题]

上网时，感觉网络时快时慢，主要是哪种时延引起的？

A. 发送时延

B. 传播时延

C. 处理时延

D. 排队时延

**答案**：D

> **解析：**
>
> 网络时延由四部分组成：发送时延、传播时延、处理时延和排队时延。
> 其中发送时延、传播时延、处理时延通常是相对固定的或变化较小。
> **排队时延**取决于网络当前的通信量（负载）。当网络负载重时，分组在路由器的队列中等待处理的时间就会变长；负载轻时，等待时间就短。因此，网络时快时慢主要是由排队时延的变化引起的。

---

### 2. [单选题]

“带宽”的变化将会改变以下哪种时延？

A. 发送时延

B. 传播时延

C. 处理时延

D. 排队时延

**答案**：A

> **解析：**
>
> **发送时延**（传输时延） = 数据帧长度 / 发送速率（带宽）。
> 因此，提高网络带宽（即提高发送速率）会直接减小发送时延。
> 传播时延取决于介质和距离；处理时延和排队时延取决于路由器性能和网络负载，与链路带宽无直接公式关系。

---

### 3. [填空题]

假定网络的利用率达到了90%。则当前的网络时延是它的最小值的 **[填空1]** 倍。

**答案**：

[1] 10

> **解析：**
>
> 根据排队论公式：$D = \frac{D_0}{1 - U}$
> 其中 $D$ 是当前时延，$D_0$ 是网络空闲时的时延（最小时延），$U$ 是网络利用率。
> 当 $U = 90\% = 0.9$ 时：
> $D = \frac{D_0}{1 - 0.9} = \frac{D_0}{0.1} = 10 D_0$
> 所以当前时延是最小值的 10 倍。

---

### 4. [填空题]

选择相应式子的序号填空：1. kd+x/b+s；2. kd+(x/p)*p/b+(k-1)*p/b；3. kd；4. x/b；5. k*p/b；6. kd+(x/p)*(p+h)/b+(k-1)*(p+h)/b；7. (x/p)*(p+h)/b+(k-1)*(p+h)/b；8. s>(k-1)*(p/b)；9. s>k*(p/b)。

试在下列条件下比较电路交换和分组交换。要传送的报文共x（bit）。从源点到终点共经过k段链路，每段链路的传播时延为d（s），数据率为b(b/s)。在电路交换时电路的建立时间为s(s)。在分组交换时分组长度为p(bit)，且各结点的排队等待时间可忽略不计。问：电路交换的时延是 **[填空1]** ；分组交换的时延是 **[填空2]** ；在 **[填空3]** (x>>p)条件下，分组交换的时延比电路交换的时延小。

**答案**：

[1] 1
[2] 2
[3] 8

> **解析：**
>
> 1.  **电路交换时延**：建立连接时间 $s$ + 发送时延 $x/b$ + 传播时延 $k \times d$。
>     即：$s + x/b + kd$。对应选项 **1**。
> 2.  **分组交换时延**：
>     源节点发送所有数据的时间：$x/b$ (即 $(x/p) \times p/b$)
>     最后一个分组经过中间 $k-1$ 个路由器的转发时延：$(k-1) \times p/b$
>     所有链路的传播时延：$k \times d$
>     总时延：$x/b + (k-1)p/b + kd$。对应选项 **2**。
> 3.  **比较**：
>     若分组交换时延 < 电路交换时延：
>     $kd + x/b + (k-1)p/b < kd + x/b + s$
>     $(k-1)p/b < s$
>     即 $s > (k-1)(p/b)$。对应选项 **8**。

---

### 5. [填空题]

选择相应式子的序号填空：1. kd+x/b+s；2. kd+(x/p)*p/b+(k-1)*p/b；3. kd；4. x/b；5. k*p/b；6. kd+(x/p)*(p+h)/b+(k-1)*(p+h)/b；7. (x/p)*(p+h)/b+(k-1)*(p+h)/b；8. s>(k-1)*(p/b)；9. s>k*(p/b)。

若上题条件中，分组长度为p+h(bit),其中p为分组的数据部分的长度，h为每个分组所带的控制信息固定长度，与p的大小无关；其他条件不变。则分组交换的发送时延是 **[填空1]** ，传播时延是 **[填空2]** ，总时延是 **[填空3]** 。

**答案**：

[1] 7
[2] 3
[3] 6

> **解析：**
>
> 分组总数 $N = x/p$。每个分组长度 $L = p+h$。
> 1.  **发送时延**：源主机将所有分组发送到链路上的时间。
>     $N \times L / b = (x/p) \times (p+h) / b$。
>     加上中间节点的转发（实际上题目这里可能指总的发送/传输部分，但选项7包含了转发部分？不，选项7是 $(x/p)*(p+h)/b + (k-1)*(p+h)/b$。这是总的传输时延部分，包括源发送和中间转发）。
>     题目问“发送时延”，通常指源发送时延 $(x/p)(p+h)/b$。但选项中没有单独的这个。
>     观察选项7：$(x/p)*(p+h)/b + (k-1)*(p+h)/b$。这是源发送时延 + 中间路由器转发最后分组的时延。这通常被称为“总传输时间”或“总时延”中的时延部分。
>     **纠正**：题目可能把“发送时延”理解为所有分组从源发出加上在路径上的存储转发延迟？
>     让我们看“总时延”选项6：`kd+(x/p)*(p+h)/b+(k-1)*(p+h)/b`。这显然是 总时延 = 传播 + (源发送+中间转发)。
>     那么“传播时延”是 `kd` (选项3)。
>     剩下的“发送时延”填空，选项7最合适，代表了数据在设备上的处理/传输总时间（不含传播）。
>     *注：严格来说发送时延仅指结点将分组推向链路的时间，但在此语境下配合选项，[1]填7，[2]填3，[3]填6是逻辑自洽的。*

---

### 6. [简答题]

（习题1-24）论述具有五层协议的网络体系结构的要点，包括各层的主要功能。

**答案**：

（见解析）

> **解析：**
>
> **（1）物理层**
> 物理层的任务就是透明地传送比特流。物理层还要确定连接电缆插头的定义及连接法。
>
> **（2）数据链路层**
> 数据链路层的任务是在两个相邻结点间的线路上无差错地传送以帧（frame）为单位的数据。每一帧包括数据和必要的控制信息。
>
> **（3）网络层**
> 网络层的任务就是要选择合适的路由，使发送站的运输层所传下来的分组能够正确无误地按照地址找到目的站，并交付给目的站的运输层。
>
> **（4）运输层**
> 运输层的任务是向上一层的进行通信的两个进程之间提供一个可靠的端到端服务，使它们看不见运输层以下的数据通信的细节。
>
> **（5）应用层**
> 应用层直接为用户的应用进程提供服务。

---

### 7. [填空题]

长度为100字节的应用层数据交给运输层传送，需加上20字节的TCP首部。再交给网络层传送，需加上20字节的IP首部。最后交给数据链路层的以太网传送，加上首部和尾部共18字节。则发送方发送的总数据是 **[填空1]** 字节，实际发送的有效数据是 **[填空2]** 字节，数据传输效率是 **[填空3]** %（保留两位小数）。

若应用层数据长度为1000字节，则发送方发送的总数据是 **[填空4]** 字节，数据传输效率是 **[填空5]** %（保留两位小数）。

数据的传输效率是指发送的应用层数据除以所发送的总数据（即应用数据加上各种首部和尾部的额外开销）。

**答案**：

[1] 158
[2] 100
[3] 63.29
[4] 1058
[5] 94.52

> **解析：**
>
> **情况 1：应用层数据 100 B**
> *   总数据 = 100 (Data) + 20 (TCP) + 20 (IP) + 18 (Ethernet) = 158 字节。
> *   有效数据 = 100 字节。
> *   传输效率 = 100 / 158 ≈ 0.63291... ≈ 63.29%。
>
> **情况 2：应用层数据 1000 B**
> *   总数据 = 1000 + 20 + 20 + 18 = 1058 字节。
> *   传输效率 = 1000 / 1058 ≈ 0.94517... ≈ 94.52%。

---
