# 第9次课测试

### 1. [单选题]

按查找路由表的最长前缀匹配原则，默认路由可放在转发表的

A. 第1项

B. 最后1项

C. 任意位置

D. 主机路由的后面

**答案**：B

> **解析：**
>
> 默认路由的前缀长度最短（0位），根据**最长前缀匹配**原则，路由器通常将路由表按前缀长度排序（或使用特定的数据结构）。逻辑上，只有当所有特定的路由项都不匹配时，才匹配默认路由，因此通常认为它放在转发表的最后1项。

---

### 2. [简答题]

试说明IP地址和MAC地址的区别。为什么要使用这两种不同的地址？

**答案**：

（见解析）

> **解析：**
>
> **(1) 区别**：
> *   **位置不同**：IP地址放在IP数据报的首部，MAC地址放在MAC帧的首部。
> *   **层级不同**：IP地址应用于网络层及以上，MAC地址应用于数据链路层及以下。
> *   **变化特性**：在传输过程中，源IP和目的IP通常保持不变，而源MAC和目的MAC在每一跳（网络段）都会发生变化。
>
> **(2) 为什么使用两种地址**：
> *   **MAC地址**：用于屏蔽底层物理网络的差异（不同类型的物理网络MAC地址格式不同，如以太网、令牌环等），解决局域网内的硬件寻址问题。它是物理固化的。
> *   **IP地址**：提供统一的逻辑编址方案，屏蔽了底层物理网络的异构性，使得不同类型的网络能够互连互通。IP地址协助路由选择，实现跨网络通信。

---

### 3. [简答题]

**一个数据报长度为4000字节（固定首部长度）。现在经过一个网络传送，但此网络能够传送的最大数据长度为1500字节。试问应当划分为几个短些的数据报片？各数据报片的数据字段长度、片偏移字段和MF标志应为何数值？**

**答案**：

（见解析）

> **解析：**
>
> *   **IP数据报总长**：4000字节。假设首部长度为固定的 **20字节**，则数据载荷长度为 $4000 - 20 = 3980$ 字节。
> *   **MTU**：1500字节。每个分片最大数据载荷 = $1500 - 20 = 1480$ 字节。
>
> **分片计算**：
> 1.  **第1片**：数据 1480 B。剩余 $3980 - 1480 = 2500$ B。
>     片偏移 = $0 / 8 = 0$。MF = 1。
> 2.  **第2片**：数据 1480 B。剩余 $2500 - 1480 = 1020$ B。
>     片偏移 = $1480 / 8 = 185$。MF = 1。
> 3.  **第3片**：数据 1020 B。剩余 0。
>     片偏移 = $(1480 + 1480) / 8 = 2960 / 8 = 370$。MF = 0。
>
> | | 数据字段长度 | 片偏移 | MF |
> | :--- | :--- | :--- | :--- |
> | 数据报片1 | 1480 | 0 | 1 |
> | 数据报片2 | 1480 | 185 | 1 |
> | 数据报片3 | 1020 | 370 | 0 |

---

### 4. [简答题]

设某路由器建立了以下转发表：


| 网络前缀 | 下一跳 |
| --- | --- |
| 192.4.153.0/26 | **R3** |
| 128.96.39.0/25 | **接口m0** |
| 128.96.39.128/25 | **接口m1** |
| 128.96.40.0/25 | **R2** |
| *（默认） | **R4** |

现共收到5个分组，其目的地址分别为：

（1）128.96.39.10；（2）128.96.40.12；（3）128.96.40.151；（4）192.4.153.17；（5）192.4.153.90。

试分别计算其下一跳。（要求有计算过程！）

**答案**：

（见解析）

> **解析：**
>
> **(1) 目的地址 128.96.39.10**
> *   与 128.96.39.0/25：`128.96.39.10` AND `255.255.255.128` -> `128.96.39.0`。**匹配**。
> *   与 128.96.39.128/25：`128.96.39.10` < 128。**不匹配**。
> *   **下一跳：接口 m0**。
>
> **(2) 目的地址 128.96.40.12**
> *   与 128.96.40.0/25：`128.96.40.12` AND `255.255.255.128` -> `128.96.40.0`。**匹配**。
> *   **下一跳：R2**。
>
> **(3) 目的地址 128.96.40.151**
> *   与 128.96.40.0/25：`128.96.40.151` (>127) AND ... -> `128.96.40.128`。不等于 `128.96.40.0`。**不匹配**。
> *   其他特定路由也不匹配。
> *   **下一跳：R4 (默认)**。
>
> **(4) 目的地址 192.4.153.17**
> *   与 192.4.153.0/26：`192.4.153.17` AND `255.255.255.192` -> `192.4.153.0`。**匹配**。
> *   **下一跳：R3**。
>
> **(5) 目的地址 192.4.153.90**
> *   与 192.4.153.0/26：`192.4.153.90` (`01011010`) AND `192` (`11000000`) -> `192.4.153.64`。不等于 `192.4.153.0`。**不匹配**。
> *   **下一跳：R4 (默认)**。

---
