# 第一章 概述

### 1.1 单选题

以下哪项不属于计算机网络向用户提供的资源共享。

* A. 信息共享
* B. 软件共享
* C. 硬件共享
* D. 线路共享

**答案**：**D**

> **解析：**
> 计算机网络的三大主要资源共享功能是：**硬件共享**、**软件共享**和**数据（信息）共享**。
> 虽然网络通信利用了“线路共享”或“信道复用”技术来传输数据，但这是通信的底层手段，而不是网络直接面向最终用户提供的“资源服务”类型。用户上网的目的是为了获取文件（信息）、使用云端应用（软件）或打印机/服务器（硬件），而不是为了“共享一根电线”。

---

### 1.2 单选题

以下说法，哪个是不正确的。

* A. 因特网是单个计算机网络
* B. 因特网是一个互连网络
* C. 因特网的英文是 Internet
* D. 因特网的前身是美国的 ARPANET

**答案**：**A**

> **解析：**
>
> * **A 错误**：因特网（Internet）不是“单个”物理网络，而是由许多网络通过路由器互连而成的“网络的网络”。
> * B 正确：Internet 的定义就是互连网。
> * C、D 均为客观事实。

---

### 1.3 填空题

网络中的时延由 [填空1] 时延、[填空2] 时延、[填空3] 时延和 [填空4] 时延四部分组成。

**答案**：**发送（传输）；传播；处理；排队 （顺序可互换）**

> **解析：**
> 分组在网络中传输时，总时延 = **发送时延**（Transmission Delay）+ **传播时延**（Propagation Delay）+ **处理时延**（Processing Delay）+ **排队时延**（Queuing Delay）。
>
> * **发送时延**：主机或路由器发送数据帧所需要的时间（数据长度 / 发送速率）。
> * **传播时延**：电磁波在信道中传播一定的距离需要的时间（信道长度 / 电磁波在信道上的传播速率）。
> * **处理时延**：主机或路由器在收到分组时要花费一定的时间进行处理。
> * **排队时延**：分组在路由器输入输出队列中排队等待处理所经历的时延。

---

### 1.4 填空题

为进行网络中数据交换而建立的规则、标准或约定称为 [填空1]。

**答案**：**网络协议（或 协议）**

> **解析：**
> 这是计算机网络中最基础的定义之一。协议的三要素是：**语法**、**语义**和**同步**（时序）。

---

### 1.5 单选题

下述网络不属于按照作用范围进行分类的是？

* A. 个人区域网
* B. 公用网
* C. 城域网
* D. 广域网

**答案**：**B**

> **解析：**
> 计算机网络按**作用范围**（地理覆盖范围）分类主要有：
>
> * **PAN (Personal Area Network)**：个人区域网。
> * **LAN (Local Area Network)**：局域网。
> * **MAN (Metropolitan Area Network)**：城域网。
> * **WAN (Wide Area Network)**：广域网。
>
> 选项 **B. 公用网 (Public Network)** 是按照**使用者**进行分类的（对应的另一类是专用网），不属于按地理范围分类。

---

### 1.6 多选题

网络协议的三个组成要素是什么？

* A. 语法
* B. 语义
* C. 事件
* D. 同步

**答案**：**A, B, D**

> **解析：**
> 网络协议是为了进行网络中的数据交换而建立的规则、标准或约定。其三大要素为：
>
> 1. **语法 (Syntax)**：数据与控制信息的结构或格式（怎么写）。
> 2. **语义 (Semantics)**：需要发出何种控制信息，完成何种动作以及做出何种响应（做什么）。
> 3. **同步 (Synchronization)**：即时序，事件实现顺序的详细说明（何时做）。
>
> 选项 C "事件" 不是协议的三要素之一。

---

### 1.7 单选题

在下图所示的采用“存储-转发”方式分组的交换网络中，所有链路的数据传输速度为 100Mbps，分组大小为 1000B，其中分组头大小 20B，若主机 H1 向主机 H2 发送一个大小为 980000B 的文件，则在不考虑分组拆装时间和传播延迟的情况下，从 H1 发送到 H2 接收完为止，需要的时间至少是

* A. 80ms
* B. 80.08ms
* C. 80.16ms
* D. 80.24ms

**答案**：**B**

> **解析：**
> 这是一道典型的**分组交换时延计算**题（流水线传输）。
>
> 1. **参数提取**：
>
> * 文件大小 $L = 980000 \text{ B}$
> * 分组全长 $P = 1000 \text{ B}$
> * 分组头 $H = 20 \text{ B}$
> * 数据载荷长度 $Data = P - H = 1000 - 20 = 980 \text{ B}$
> * 链路带宽 $R = 100 \text{ Mbps} = 100 \times 10^6 \text{ bps}$
> * 链路跳数 $k = 2$ （H1->路由器，路由器->H2，共2跳）
>
> 2. **计算分组数量 ($N$)**：
>    $N = \lceil L / Data \rceil = \lceil 980000 / 980 \rceil = 1000 \text{ 个}$
>
> 3. **计算单个分组的发送时延 ($t_{trans}$)**：
>    $t_{trans} = P / R = (1000 \times 8) / (100 \times 10^6) = 80 \times 10^{-6} \text{ s} = 0.08 \text{ ms}$
>
> 4. **计算总时间 ($T$)**：
>    在存储转发的分组交换中，源主机连续发送 $N$ 个分组，当第 $N$ 个分组刚离开源主机时，耗时 $N \times t_{trans}$。此时第 $N$ 个分组还需要经过 $k-1$ 个路由器的转发才能到达目的地。
>    公式：$T = N \times t_{trans} + (k-1) \times t_{trans} = (N + k - 1) \times t_{trans}$
>    $T = (1000 + 2 - 1) \times 0.08 \text{ ms} = 1001 \times 0.08 \text{ ms} = 80.08 \text{ ms}$

---

# 第二章 物理层

### 2.1 填空题

物理层的主要任务描述为确定与传输媒体的接口有关的一些特性，即机械特性、[填空1] 特性、[填空2] 特性、和过程特性。

**答案**：**电气；功能 （顺序可互换）**

> **解析：**
> 物理层的四大特性是计算机网络基础知识中的高频考点：
>
> 1. **机械特性**：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等。
> 2. **电气特性**：指明在接口电缆的各条线上出现的电压的范围。
> 3. **功能特性**：指明某条线上出现的某一电平的电压的意义。
> 4. **过程特性**（也称规程特性）：指明对于不同功能的各种可能事件的出现顺序。

---

### 2.2 填空题

传输媒体可分为两大类，即导引型传输媒体和 [填空1] 传输媒体。

**答案**：**非导引型**

> **解析：**
>
> * **导引型传输媒体**（Guided Media）：电磁波被导引沿着固体媒体（铜线或光纤）传播，如双绞线、同轴电缆、光纤。
> * **非导引型传输媒体**（Unguided Media）：电磁波在自由空间中传播，通常指无线传输（如无线电波、微波、红外线）。

---

### 2.3 单选题

在物理层接口特性中，什么特性用于指明某条线上出现的某一电平的电压的意义。

* A. 机械特性
* B. 功能特性
* C. 过程特性
* D. 电气特性

**答案**：**B**

> **解析：**
>
> * **电气特性**：规定电压的**范围**（例如：-5V 到 +5V）。
> * **功能特性**：规定**电压的意义**（例如：高电平代表 1，还是低电平代表 1；或者某根线高电平表示“准备就绪”）。
>   题目问的是“电压的意义”，因此是功能特性。

---

### 2.4 单选题

通信的双方都可以发送信息，但不能同时发送的通信方式称为

* A. 单向通信
* B. 双向通信
* C. 双向交替通信
* D. 双向同时通信

**答案**：**C**

> **解析：**
>
> * **单向通信**（单工）：只能有一个方向的通信（如无线电广播）。
> * **双向交替通信**（半双工）：双方都能发送，但不能同时发送，必须轮流进行（如对讲机）。**（题目描述符合此项）**
> * **双向同时通信**（全双工）：双方可以同时发送和接收（如电话）。

---

### 2.5 单选题

在以下传输媒体中，带宽最宽，抗干扰能力最强的是

* A. 同轴电缆
* B. 双绞线
* C. 光纤
* D. 微波无线信道

**答案**：**C**

> **解析：**
>
> * **同轴电缆 (Coaxial cable)**：抗干扰性较好，但带宽和传输距离不如光纤。
> * **双绞线 (Twisted pair)**：成本低，但抗干扰能力和带宽相对较低。
> * **光纤 (Fiber optic)**：利用光脉冲传输信号，**带宽极宽**（可达Tbps级别），且光信号不受电磁干扰（EMI）影响，因此**抗干扰能力最强**。
> * **微波无线信道**：易受气候和环境影响，且带宽受频谱资源限制。

---

### 2.6 多选题

通信系统的一般模型中，以下哪些部分是可有可无的？

* A. 信源
* B. 发送器
* C. 信道
* D. 接收器
* E. 信宿

**答案**：**B, D**

> **解析：**
> 这是一个基于通信原理模型的考题。
>
> 1. **必不可少的部分**：**信源**（信息的产生者）、**信宿**（信息的接收者）和**信道**（传输媒介）。没有这三者，通信无法建立。
> 2. **“可有可无”的解释**：**发送器**（如调制器）和**接收器**（如解调器）的作用是进行信号的转换（如数字转模拟、基带转频带）。在某些简单的**基带传输**系统中（例如短距离直接电缆连接），如果信源发出的信号可以直接在信道上传输，则不需要复杂的调制/解调发送器和接收器环节。因此在一般模型的广义对比中，B和D被视为在特定条件下可以省略（或者说合并入信源/信宿内部）的部分。
>
> *注：这道题在不同的教材体系中可能有不同解读，但在考查“基带传输”与“频带传输”区别的语境下，通常选 B、D。*

---

### 2.7 单选题

在无噪声情况下，若某通信链路的带宽为 3kHz，采用 4 个相位，每个相位具有 4 种振幅的 QAM 调制技术，则该通信链路的最大数据传输速率是（ ）

* A. 12 kbps
* B. 24 kbps
* C. 48 kbps
* D. 96 kbps

**答案**：**B**

> **解析：**
> 使用**奈奎斯特（Nyquist）定理**（无噪声环境）：
> 公式：$C = 2W \log_2 V$
>
> * 带宽 $W = 3 \text{ kHz}$
> * 信号状态数 $V$ ：4 个相位 $\times$ 4 种振幅 = 16 种状态。
> * 每个码元携带的比特数 $= \log_2 V = \log_2 16 = 4 \text{ bit}$。
> * 最大速率 $C = 2 \times 3000 \times 4 = 24000 \text{ bps} = 24 \text{ kbps}$。

---

### 2.8 单选题

所有用户在不同时间占用相同的频带宽度的信道复用是（ ）

* A. SDM
* B. FDM
* C. TDM
* D. CDM

**答案**：**C**

> **解析：**
>
> * **TDM (Time Division Multiplexing，时分复用)**：将时间划分为一段段等长的时分复用帧（TDM帧），每个用户在每个TDM帧中占用固定序号的时隙。其特点正是**“不同时间，相同频率”**。
> * FDM (频分复用)：相同时间，不同频率。
> * CDM (码分复用)：相同时间，相同频率，使用不同码型。
> * SDM (空分复用)：利用空间分割。

---

### 2.9 多选题

以下关于数字传输系统 SDH 标准的说法，哪些是正确的

* A. 使不同的数字传输体制在 STM-1 等级上获得了统一。
* B. 同步网络的各级时钟都来自一个主时钟。
* C. SDH 的基本速率为 155.520Mb/s。
* D. SDH 不适合于微波和卫星传输的技术体制。

**答案**：**A, B, C**

> **解析：**
>
> * **A 正确**：SDH（同步数字体系）解决了过去 PDH（准同步数字体系）标准不统一的问题，在 STM-1（第1级同步传递模块）等级上实现了统一。
> * **B 正确**：SDH 的核心特点是“同步”，网络中所有时钟都同步于一个高精度的其准主时钟。
> * **C 正确**：STM-1 的速率确实是 $155.520 \text{ Mb/s}$。
> * **D 错误**：虽然 SDH 最初是为光纤传输设计的，但它也可以通过微波链路进行传输（SDH 微波）。说它“不适合”过于绝对，且 SDH 协议本身支持多种物理介质映射。在标准教材中，SDH 的特点通常包括兼容性好、速率统一、强大的网络管理功能等，而不包含“不适合微波”这一负面描述。

---

### 2.10 单选题

近年来有多种宽带技术开始进入家庭，其中家庭通过电话线上网采用的技术是（ ）

* A. FTTx
* B. HFC
* C. CATV
* D. xDSL

**答案**：**D**

> **解析：**
>
> * **xDSL (Digital Subscriber Line)**：数字用户线，是利用现有的**电话双绞线**进行宽带传输的技术（如 ADSL）。
> * FTTx：光纤接入。
> * HFC / CATV：利用有线电视网（同轴电缆）接入。

---

### 2.11 单选题

宽带光纤接入方式 FTTH，表示

* A. 光纤到小区
* B. 光纤到大楼
* C. 光纤到路边
* D. 光纤到户

**答案**：**D**

> **解析：**
> FTTH 是 **Fiber To The Home** 的缩写，意为**光纤到家**（或光纤到户）。
>
> * FTTN (Fiber To The Neighborhood)：光纤到小区/邻里。
> * FTTB (Fiber To The Building)：光纤到大楼。
> * FTTC (Fiber To The Curb)：光纤到路边。

---

### 2.12 单选题

站点 A、B、C 通过 CDMA 共享链路，A、B、C 的码片序列分别是 (+1, +1, +1, +1) 、 (+1, -1, +1, -1) 和 (+1, +1, -1, -1) ，若 C 从链路上收到的序列是 (+2, +0, +2, +0, +0, -2, +0, -2, +0, +2, +0, +2) ，则 C 收到 A 发送的数据是（ ）

* A. 000
* B. 101
* C. 110
* D. 111

**答案**：**B**

> **解析：**
> CDMA 系统中，要提取特定站点（如站点 A）的数据，需要将接收到的总信号序列与该站点的码片序列进行**规格化内积**运算。
>
> * **总序列 S**：(+2, +0, +2, +0, +0, -2, +0, -2, +0, +2, +0, +2)
> * **A 的码片**：(+1, +1, +1, +1)
> * **码片长度**：4
> * 总序列长度为 12，说明发送了 3 个比特（12 / 4 = 3）。我们将 S 分为三段计算。
>
> 1. **第1个比特**（前4位）：$S_1 \cdot A / 4 = (2\times1 + 0\times1 + 2\times1 + 0\times1)/4 = 4/4 = 1$。
> 2. **第2个比特**（中4位）：$S_2 \cdot A / 4 = (0\times1 + (-2)\times1 + 0\times1 + (-2)\times1)/4 = -4/4 = -1$（代表逻辑 0）。
> 3. **第3个比特**（后4位）：$S_3 \cdot A / 4 = (0\times1 + 2\times1 + 0\times1 + 2\times1)/4 = 4/4 = 1$。
>
> 结果为：1, 0, 1。

---

### 9 (18年考研34题) 单选题

下列选项中，不属于物理层接口规范定义范畴的是 ()

* A. 机械特性
* B. 功能特性
* C. 物理地址
* D. 电气特性

**答案**：**C**

> **解析：**
> 物理层接口规范（DTE-DCE 接口）主要定义了四个方面的特性：
>
> 1. **机械特性**：如接口形状、插针数量（对应 A）。
> 2. **电气特性**：如电压范围、信号电平（对应 D）。
> 3. **功能特性**：如引脚的功能定义（对应 B）。
> 4. **过程特性**：事件发生的顺序。
>
> **C. 物理地址**（即 MAC 地址）是**数据链路层**的概念，不属于物理层。

---


# 第三章 数据链路层

### 3.1 单选题

数据链路层的主要功能是

* A. 为终端用户提供端到端的传输服务
* B. 为应用进程提供网络服务
* C. 为分组在网络中的路由选择路径
* D. 在两个相邻结点间的链路上传送以帧为单位的数据

**答案**：**D**

> **解析：**
>
> * A 和 B 是传输层或应用层的功能。
> * C 是网络层（IP 层）的功能。
> * **D. 在两个相邻结点间的链路上传送以帧为单位的数据**：这是数据链路层的标准定义。

---

### 3.2 填空题

数据链路层协议有许多种，但有三个基本问题则是共同的，这三个基本问题是 [填空1]、[填空2] 和 [填空3]。

**答案**：**封装成帧；透明传输；差错检测**

> **解析：**
>
> * **封装成帧 (Framing)**：在一段数据前后添加首部和尾部，确定帧的界限。
> * **透明传输 (Transparent Transmission)**：采取措施（如字节填充）解决数据中出现帧定界符导致误判的问题，确保任何数据都能传输。
> * **差错检测 (Error Detection)**：如使用 CRC 循环冗余校验，丢弃传输中出现误码的帧。

---

### 3.3 多选题

PPP 协议应满足的需求有

* A. 简单
* B. 封装成帧
* C. 透明性
* D. 差错检测
* E. 支持多点线路
* F. 支持多种网络层协议

**答案**：**A, B, C, D, F**

> **解析：**
> IETF 在设计 PPP（点对点协议）时确定的主要需求包括：
>
> * **简单**（A）：这是首要需求。
> * **封装成帧**（B）：必须规定特殊的帧定界符。
> * **透明性**（C）：必须保证数据传输的透明性（如字节填充）。
> * **多种网络层协议**（F）：必须能在同一条物理链路上同时支持多种网络层协议（如 IP, IPX 等）。
> * **差错检测**（D）：必须能对接收端收到的帧进行检测（CRC）。
> * **E 错误**：PPP 是 Point-to-Point Protocol，明确是**点对点**的，**不支持**多点线路（那是总线型网络的需求）。

---

### 3.4 填空题

发送的数据为 101001 ，采用 CRC 的生成多项式是 $P(x)=x^3+x^2+1$ ，求添加在数据后面的余数是 [填空1]

**答案**：**001**

> **解析：**
>
> 1. **确定除数**：生成多项式 $P(x)=x^3+x^2+1$ ，对应的二进制码为 1101 （系数为 1,1,0,1 ）。
> 2. **确定被除数**：发送数据为 $M=101001$ ，因为生成多项式的最高次幂是 3，所以在数据后面补 3 个 0，被除数变为 101001000 。
> 3. **模2除法运算**（异或运算）：
>
> * $101001000 / 1101$
> * 第1步：$1010 \text{ XOR } 1101 = 0111$ ，余数 111 ；落下后一位 0 ，变为 1110 。
> * 第2步：$1110 \text{ XOR } 1101 = 0011$ ，余数 11 ；落下后一位 1 ，变为 111 （不够除，商0）；再落后一位 0 ，变为 1110 。
> * 第3步：$1110 \text{ XOR } 1101 = 0011$ ，余数 11 ；落下后一位 0 ，变为 110 （不够除）；再落后一位 0 ，变为 1100 。
> * 第4步：$1100 \text{ XOR } 1101 = 0001 (001)$ \dots
>
> 4. **结果**：余数为 **001**。

---

### 3.5 填空题

一个 PPP 的数据部分（用十六进制写出）是 7D 5E FE 27 7D 5D 7D 5D 65 7D 5E。试问真正的数据是 [填空1] （用十六进制写出）。

**答案**：**7E FE 27 7D 7D 65 7E**

> **解析：**
> PPP 协议在异步传输时使用**字节填充法**。转义字符是 `0x7D`。
> 规则：
>
> 1. 见到 `7E`，转义为 `7D 5E`。
> 2. 见到 `7D`，转义为 `7D 5D`。
> 3. 还原时：见到 `7D`，将其丢弃，并将后一个字节与 `0x20` 进行异或（XOR）运算。
>
> **还原过程**：
>
> * `7D 5E` -> 丢弃 7D，`5E` XOR `20` = **7E**
> * `FE` -> 保持不变 = **FE**
> * `27` -> 保持不变 = **27**
> * `7D 5D` -> 丢弃 7D，`5D` XOR `20` = **7D**
> * `7D 5D` -> 丢弃 7D，`5D` XOR `20` = **7D**
> * `65` -> 保持不变 = **65**
> * `7D 5E` -> 丢弃 7D，`5E` XOR `20` = **7E**
>
> 最终结果：**7E FE 27 7D 7D 65 7E**

---

### 3.6 单选题

HDLC 协议对 01111100 01111110 组帧后对应的比特串为

* A. 01111100 01111110
* B. 01111100 01111101 0
* C. 01111100 01111100 0
* D. 01111100 01111101

**答案**：**B**

> **解析：**
>
> > HDLC 采用**零比特填充法**（Bit Stuffing）来实现透明传输：**只要发现 5 个连续的 1，就在其后插入一个 0**。
> >
>
> 原始数据：`01111100 01111110`
>
> 1. 扫描第一段 `011111...`：发现 5 个 1，插入 0  `0111110`。
> 2. 接下来的比特是 `00`  结果变为 `011111000`。
> 3. 继续扫描 `011111...`：发现 5 个 1，插入 0  `0111110`。
> 4. 接下来的比特是 `10`  结果变为 `...011111010`。
>
> 组合起来：`011111000` + `011111010` = `01111100011111010`。
> 对应选项 B（注：选项 B 中间有空格 `01111100 01111101 0`，去掉空格后与计算结果一致）。

---

### 3.7 多选题

局域网的拓扑结构主要有

* A. 星形网
* B. 环形网
* C. 总线网
* D. 树形网

**答案**：**A, B, C, D**

> **解析：**
>
> > 常见的局域网拓扑结构包括：
> >
>
> * **A. 星形**：目前最主流的结构（使用集线器或交换机为中心）。
> * **B. 环形**：如令牌环网（Token Ring）。
> * **C. 总线形**：早期使用同轴电缆的以太网。
> * **D. 多级星形**（或树形）：通过交换机级联形成的扩展星形结构，广泛用于大型局域网。

---

### 3.8 多选题

局域网可使用的传输媒体有

* A. 双绞线
* B. 同轴电缆
* C. 光纤
* D. 无线信道

**答案**：**A, B, C, D**

> **解析：**
> 局域网（LAN）技术发展至今，支持多种介质：
>
> * **A. 双绞线**：现代以太网最常用的介质（如 Cat5e, Cat6）。
> * **B. 同轴电缆**：早期以太网（如 10Base2, 10Base5）使用，现在主要用于有线电视网络接入。
> * **C. 光纤**：用于高速局域网或长距离连接（光纤以太网）。
> * **D. 无线微波信道**：无线局域网（WLAN/Wi-Fi）使用微波频段（2.4GHz, 5GHz）进行传输。

---

### 3.9 单选题

以太网采用的共享信道技术是

* A. 频分复用
* B. 时分复用
* C. 随机接入
* D. 受控接入

**答案**：**C**

> **解析：**
> 以太网（Ethernet）使用 **CSMA/CD**（载波监听多点接入/碰撞检测）协议，这属于**随机接入 (Random Access)** 技术。
>
> * A. 频分复用 (FDM) 和 B. 时分复用 (TDM) 是静态划分信道技术。
> * D. 受控接入 (Controlled Access) 是如令牌环网（Token Ring）使用的技术。

---

### 3.10 单选题

网络适配器实现了体系结构中哪层的功能

* A. 物理层
* B. 数据链路层
* C. 物理层和数据链路层
* D. 网络层

**答案**：**C**

> **解析：**
> 网络适配器（Network Adapter），通常指网卡（NIC）。
> 它不仅要处理物理接口的电信号转换（**物理层**功能），还要处理帧的封装、解封、MAC地址识别以及CSMA/CD协议的执行（**数据链路层**功能）。因此它跨越了物理层和数据链路层。

---

### 3.11 单选题

从数据链路层发送的帧要包含物理地址，该地址是

* A. 由用户指定的
* B. 由网络管理员分配的
* C. 存储在网卡 ROM 中的
* D. 存储在网卡 RAM 中的

**答案**：**C**

> **解析：**
> 物理地址即 MAC 地址（硬件地址）。
>
> * MAC 地址在生产时被固化在网卡的 **ROM**（只读存储器）中。
> * 当计算机启动或网卡初始化时，该地址被读取，并由驱动程序（软件）将其放置在待发送帧的首部（MAC帧头）中。
> * 选项 A 和 B 错误，因为 MAC 地址通常不是由高层软件任意或按规则构造的（那是逻辑地址/IP地址的特性），而是硬件固有的（尽管现代网卡允许软件修改欺骗，但题目考察的是标准原理）。
> * 选项 D 错误，MAC 地址存储在 ROM 中，而不是 RAM（掉电丢失）中。

---

### 3.12 单选题

以太网的数据链路层协议是

* A. PPP
* B. CSMA/CA
* C. CSMA/CD
* D. CDMA

**答案**：**C**

> **解析：**
>
> * **CSMA/CD** (Carrier Sense Multiple Access with Collision Detection)：载波监听多点接入/碰撞检测，是**有线以太网**（IEEE 802.3）的核心协议。
> * **CSMA/CA**：用于无线局域网（Wi-Fi, 802.11）。
> * **CDMA**：码分多址，主要用于移动通信网络（3G等）。

---

### 3.13 填空题

假定 1km 长的 CSMA/CD 网络的数据率为 1Gbit/s。设信号在网络上的传播速度为 200000km/s。能够使用此协议的最短帧长是 [填空1] 字节。

**答案**：**1250**

> **解析：**
> CSMA/CD 协议为了保证碰撞检测（Collision Detection），要求**最短帧长**必须大于等于**争用期**内发送的比特数。
>
> 1. **计算单程传播时间 ($\tau$)**：
>    $\tau = \text{Distance} / \text{Speed} = 1 \text{ km} / 200000 \text{ km/s} = 5 \times 10^{-6} \text{ s} = 5 \mu s$
> 2. **计算争用期 ($2\tau$)**：
>    $2\tau = 2 \times 5 \mu s = 10 \mu s$
> 3. **计算最短帧长 (bit)**：
>    $L_{min} = 2\tau \times \text{DataRate} = 10 \times 10^{-6} \text{ s} \times 1 \times 10^9 \text{ b/s} = 10000 \text{ bit}$
> 4. **转换为字节 (Byte)**：
>    $10000 / 8 = 1250 \text{ Byte}$

---

### 3.14 多选题

所谓名字是指（ ），名字与系统所在地（ ）。

* A. 资源的标识
* B. 资源的地址
* C. 与系统所在地有关
* D. 与系统所在地无关

**答案**：**A, D**

> **解析：**
> 这是一个关于分布式系统或网络体系结构中“命名、寻址和路由”的经典定义：
>
> 1. **名字 (Name)**：标识**所要寻找的资源**是什么（What）。
> 2. **地址 (Address)**：标识**资源在何处**（Where）。
> 3. **路由 (Route)**：标识**如何到达该处**（How）。
>
> 理想情况下，名字应该是**位置无关**的（即与系统所在地**无关**），这样即使资源移动了位置（地址变了），名字依然有效。

---

### 3.15 多选题

用集线器扩展以太网，可以

**答案**：**A, B**

> **解析：**
> 集线器（Hub）工作在物理层。
>
> * **A. 扩大网络覆盖的地理范围**：正确，集线器作为中继器，可以对信号进行整形放大，延长传输距离。
> * **B. 增大碰撞域**：正确（但这通常是缺点）。集线器将多个网段连成一个更大的网段，所有连接的设备属于同一个碰撞域（冲突域）。
> * C. 提高吞吐量：错误。集线器是共享带宽设备，连接的设备越多，每个设备分到的平均带宽越小，总吞吐量受限于碰撞，不会提高。
> * D. 互连不同数据率的网络：错误。集线器无法缓存数据，不能连接速率不同的网段（如 10Mb/s 和 100Mb/s 不能直接用 Hub 连）。

---

### 3.16 单选题

以太网交换机进行转发决策时使用的 PDU 地址是

* A. 目的物理地址
* B. 源物理地址
* C. 目的 IP 地址
* D. 源 IP 地址

**答案**：**A**

> **解析：**
> 接上一题（3.17）的解析：
>
> * **转发决策**：交换机在转发表中查找帧的**目的物理地址 (Destination MAC)**。如果找到，就从对应端口转发；如果没找到，就向除入端口外的所有端口广播（泛洪）。

---

### 3.17 单选题

以太网交换机构建转发表时使用的 PDU 地址是

* A. 目的物理地址
* B. 目的 IP 地址
* C. 源物理地址
* D. 源 IP 地址

**答案**：**C**

> **解析：**
>
> > 交换机通过**自学习算法**建立转发表（MAC地址表）：
> >
>
> * **学习过程**：当交换机收到一个帧时，它查看帧的**源物理地址 (Source MAC)**，并将该地址与接收到该帧的端口号进行映射记录。
> * **转发过程**：当交换机转发帧时，才查看**目的物理地址**。
>
> 题目问的是“构建”转发表，因此依据是**源物理地址**。

---

### 3.18 单选题

下列关于虚拟局域网 VLAN 的描述，错误的是

* A. VLAN 是基于逻辑分组的，不受物理位置限制
* B. VLAN 帧会插入一个包含 VLAN ID 的 Tag
* C. 虚拟局域网 (VLAN) 是一种新型的局域网
* D. VLAN 能够限制广播域

**答案**：**C**

> **解析：**
>
> * A 正确：VLAN 是基于逻辑分组的，不受物理位置限制。
> * B 正确：在 802.1Q 标准中，VLAN 帧会插入一个 Tag，其中包含 VLAN ID（标识符）。
> * **C 错误**：**虚拟局域网（VLAN）并不是一种新型的局域网**（即它不是像以太网、令牌环网那样的新物理层/链路层技术），而是在现有的局域网技术上，通过软件配置实现的一种**管理功能**或服务。
> * D 正确：VLAN 是局域网提供给用户的一种服务，用于分割广播域。

---

### 3.19 单选题

对于 100Mbps 的以太网交换机，当输出端口无排队，以直通交换 (cut-through switching) 方式转发一个以太网帧（不包括前导码）时，引入的转发延迟至少是

* A. 0.48 ms
* B. 0.48 $\mu s$
* C. 48 $\mu s$
* D. 4.8 $\mu s$

**答案**：**B**

> **解析：**
> 直通交换（Cut-through）是指交换机只要接收到帧的**目的 MAC 地址**，就开始转发，而不需要等到整个帧接收完毕。
>
> * 以太网帧的目的 MAC 地址位于帧的最前端，长度为 **6 字节**（48比特）。
> * 带宽为 100Mbps。
> * 延迟计算：$t = \text{AddressSize} / \text{Bandwidth} = 48 \text{ bit} / (100 \times 10^6 \text{ bps}) = 0.48 \times 10^{-6} \text{ s} = 0.48 \mu s$。

---

### 3.20 填空题

假定在使用 CSMA/CD 协议的 10Mb/s 以太网中某个站在发送数据时检测到碰撞，执行退避算法时选择了随机数 r = 100。试问这个站需要等待多少 $\mu s$ 后才能再次发送数据？ [填空1] 如果是 100Mb/s 的以太网呢？ [填空2] $\mu s$

**答案**：**5120；512**

> **解析：**
>
> > 以太网采用截断二进制指数退避算法。退避时间 = 基本退避时间 $\times$ 随机数 $r$。
> > 基本退避时间取值为争用期（Slot time），即 512 比特时间（$2\tau$）。
> >
>
> 1. **对于 10Mb/s 以太网**：
>
> * 1个比特时间 = $1 / 10 \text{ Mb/s} = 0.1 \mu s$
> * 争用期（Slot time）= $512 \times 0.1 \mu s = 51.2 \mu s$
> * 等待时间 = $r \times 51.2 \mu s = 100 \times 51.2 = 5120 \mu s$
>
> 2. **对于 100Mb/s 以太网**：
>
> * 1个比特时间 = $1 / 100 \text{ Mb/s} = 0.01 \mu s$
> * 争用期（Slot time）= $512 \times 0.01 \mu s = 5.12 \mu s$
> * 等待时间 = $r \times 5.12 \mu s = 100 \times 5.12 = 512 \mu s$

---

### 14 (18年考研34题)  单选题

在 ISO/OSI 参考模型中，实现两个相邻结点间流量控制功能的是 ( )。

* A. 物理层
* B. 数据链路层
* C. 网络层
* D. 传输层

**答案**：**B**

> **解析：**
>
> > * **数据链路层 (Data Link Layer)**：负责在两个**相邻结点**（node-to-node）间的链路上无差错地传送以**帧**为单位的数据，其功能包括**流量控制**、差错控制等。
> >
>
> * 传输层：负责**端到端**（end-to-end）的流量控制。
> * 网络层：主要负责路由选择和拥塞控制。


---


# 第四章 网络层

### 4.1 填空题

网络层提供的两种服务，分别是面向连接的 [填空1] 服务和无连接的 [填空2] 服务。

**答案**：**虚电路；数据报**

> **解析：**
> 在计算机网络网络层的设计争论中（如 OSI 与 TCP/IP），主要有两种服务模型：
>
> * **虚电路 (Virtual Circuit)**：仿照电话网络，面向连接，保证顺序和可靠性（OSI 早期推崇）。
> * **数据报 (Datagram)**：IP 协议采用的模型，无连接，尽最大努力交付，不保证顺序和可靠性。

---

### 4.2 填空题

在网络互连的中继系统中，中继器处于 OSI/RM 的 [填空1] 层，网桥和交换机处于 [填空2] 层，路由器处于 [填空3] 层。

**答案**：**物理；数据链路；网络**

> **解析：**
>
> * **中继器 (Repeater) / 集线器 (Hub)**：只处理电信号的放大整形，工作在**物理层**。
> * **网桥 (Bridge) / 二层交换机 (Switch)**：基于 MAC 地址转发帧，工作在**数据链路层**。
> * **路由器 (Router)**：基于 IP 地址进行路由选择，工作在**网络层**。

---

### 4.3 填空题

试辨认以下 IP 地址的网络类别。
(1) 128.36.199.3 是 [填空1] 类地址
(2) 21.12.240.17 是 [填空2] 类地址
(3) 192.12.69.248 是 [填空3] 类地址
(4) 89.3.0.1 是 [填空4] 类地址
(5) 230.3.6.2 是 [填空5] 类地址

**答案**：**B；A；C；A；D**

> **解析：**
> 根据 IP 地址第一字节（十进制）的数值来判断类别：
>
> * **A类**：1 ~ 126
> * **B类**：128 ~ 191
> * **C类**：192 ~ 223
> * **D类**（组播）：224 ~ 239
> * **E类**（保留）：240 ~ 255
>
> 对应分析：
> (1) 128 在 B 类范围内。
> (2) 21 在 A 类范围内。
> (3) 192 在 C 类范围内。
> (4) 89 在 A 类范围内。
> (5) 230 在 D 类范围内。

---

### 4.4 单选题

网络 222.15.64.0/20 的地址范围是

* A. 222.15.64.0 ~ 222.15.79.255
* B. 222.15.64.0 ~ 222.15.64.255
* C. 222.15.64.0 ~ 222.15.127.255
* D. 222.15.0.0 ~ 222.15.255.255

**答案**：**A**

> **解析：**
>
> * **网络地址**：222.15.64.0
> * **子网掩码**：/20。这意味着前 20 位是网络号。
> * **分析第三字节**：64 = `0100 0000`。
> * /20 覆盖了第三字节的前 4 位（8+8+4=20）。
> * 第三字节的主机位部分是后 4 位（全0到全1）。
> * 块大小 = $2^{8-4} = 2^4 = 16$。
> * 范围起点：64 (`0100 0000`)
> * 范围终点：64 + 16 - 1 = 79 (`0100 1111`)
> * **完整范围**：**222.15.64.0** 到 **222.15.79.255**。
> * 注：题目问的是“地址范围”，通常指整个 CIDR 块的范围。如果要问“可用主机范围”，则应排除首尾。选项 A 包含了首尾，最符合“地址块范围”的定义。

---

### 4.5 填空题

有如下 4 个 /24 地址块, 聚合后的地址为 [填空1] / [填空2]。

**答案**：**212.56.132.0；22**

> **解析：**
> 需要进行**路由聚合 (CIDR Supernetting)**。
> 观察第三个字节：
>
> * `132` = `1000 0100`
> * `133` = `1000 0101`
> * `134` = `1000 0110`
> * `135` = `1000 0111`
>
> 找出共同前缀：前 6 位是相同的 (`1000 01`)。
>
> * 聚合后的前缀长度 = 前两个字节 (8+8) + 第三字节共同部分 (6) = **22**。
> * 聚合后的网络地址 = 保持共同前缀不变，后面补 0  `212.56.132.0`。

---

### 4.6 填空题

一个 3200bit 长的 TCP 报文传到 IP 层，加上 160bit 的首部后成为数据报。下面的互联网由两个局域网通过路由器连接起来。但第二个局域网所能传送的最长数据帧中的数据部分只有 1200bit。因此数据报在路由器必须进行分片。试问需要分成几个片？ [填空1] 第二个局域网向其上层要传送多少比特的数据？ [填空2]

**答案**：**4；3840**

> **解析：**
>
> 1. **计算分片数**：
>
> * 原始数据（Payload）= 3200 bit。
> * 第二个局域网 MTU（最大 IP 分组长度）= 1200 bit。
> * IP 首部 = 160 bit (20 字节)。
> * 每个分片最大数据载荷 = $1200 - 160 = 1040$ bit。
> * **注意**：IP 分片的数据长度必须是 **8 字节 (64 bit) 的倍数**。
> * $1040 / 64 = 16.25$，向下取整为 16。
> * 实际每个分片最大数据载荷 = $16 \times 64 = 1024$ bit。
> * 分片数量 = $\lceil 3200 / 1024 \rceil = 4$ 片（前 3 片 1024 bit，第 4 片 128 bit）。
>
> 2. **计算总传输比特数**：
>
> * 即第二个局域网上传输的所有 IP 分片（首部+数据）的总和，这些数据最终会被目的主机的 IP 层接收并向上传送。
> * 总数据位 = 3200 bit。
> * 总首部位 = $4 \times 160 = 640$ bit。
> * 总比特数 = $3200 + 640 = 3840$ bit。

---

### 4.7 填空题

设 IP 数据报使用固定首部，其各字段的值（十六进制表示）如下表所示... 对其进行反码算术运算求和结果为 0x2CADD，其填入校验和字段的值为 ox [填空1]。

**答案**：**3520**

> **解析：**
> IP 首部校验和的计算步骤如下：
>
> 1. **求和**：将首部划分为多个 16 位的序列进行求和。题目已知反码算术运算求和（累加器中的值）为 `0x2CADD`。
>
> * 由于是 16 位运算，`0x2CADD` 中的高位 `2` 是进位。
> * 需要将进位加回低位：`0xCADD + 0x0002 = 0xCADF`。
>
> 2. **取反**：校验和是和的**反码**（按位取反）。
>
> * `~0xCADF`
> * 二进制：`~ (1100 1010 1101 1111)` = `0011 0101 0010 0000`
> * 十六进制：**`3520`**

---

### 4.8 多选题

当路由器转发一个 IP 数据报时，可能改变首部中的哪些字段。

* A. 版本
* B. 首部长度
* C. 服务类型 (TOS)
* D. 总长度
* E. 标识 (Identification)
* F. 标志 (Flags)
* G. 片偏移 (Fragment Offset)
* H. 生存时间 (TTL)
* I. 协议
* J. 首部校验和
* K. 源 IP 地址
* L. 目的 IP 地址

**答案**：**D, F, G, H, J**

> **解析：**
>
>> 当路由器转发 IP 数据报时：
>>
>
> 1. **必变字段**：
>
> * **H. 生存时间 (TTL)**：每经过一个路由器减 1。
> * **J. 首部校验和**：因为 TTL 变了，校验和必须重新计算。
>
> 2. **可能改变字段**（如果需要**分片**）：
>
> * **D. 总长度**：分片后，每个片的数据量变小。
> * **F. 标志 (Flags)**：MF 位可能被置 1。
> * **G. 片偏移 (Fragment Offset)**：后续分片会有非 0 的偏移量。
>
> 题目问的是“可能改变”，因此应包含分片相关的字段。IP 地址（K, L）在普通路由转发中不变（除非是 NAT，见下题）。

---

### 4.9 单选题

某路由器路由表如下图所示，若路由器收到一个目的地址为 169.96.40.5 的 IP 分组，则转发该 IP 分组的接口是

* A. S0
* B. S1
* C. S3
* D. E0

**答案**：**C**

> **解析：**
>
>> 路由器转发分组时遵循**最长前缀匹配 (Longest Prefix Match)** 原则。
>> 目的 IP：`169.96.40.5`
>>
>
> * **检查 S1 (169.96.40.0/23)**：范围是 40.0 - 41.255。匹配。前缀长度 23。
> * **检查 S2 (169.96.40.0/25)**：范围是 40.0 - 40.127。匹配。前缀长度 25。
> * **检查 S3 (169.96.40.0/27)**：范围是 40.0 - 40.31。匹配（5 在 0-31 之间）。**前缀长度 27**。
> * **检查 S4 (0.0.0.0/0)**：默认路由。匹配。前缀长度 0。
>
> 比较前缀长度：27 > 25 > 23 > 0。因此选择匹配长度最长的 **S3** 接口。

---

### 4.10 单选题

以下命令，哪个使用了 ICMP 的回送请求及回答报文？

* A. Config
* B. Telnet
* C. Tracert
* D. Ping

**答案**：**D**

> **解析：**
>
> * **Ping**：利用 **ICMP Echo Request**（回送请求）和 **ICMP Echo Reply**（回送回答）报文来测试连通性。
> * Tracert (Windows)：主要利用 ICMP 超时报文（Time Exceeded）和回送请求。
> * Telnet：应用层协议，基于 TCP。
> * Config：通常指配置命令（如 ipconfig），不直接发送网络报文。

---

### 4.11 填空题

路由选择算法按其是否具有自适应性，可分为 [填空1] 路由选择策略和 [填空2] 路由选择策略。

**答案**：**静态（或 非自适应）；动态（或 自适应）**

> **解析：**
>
> * **静态路由 (Static Routing)**：由管理员手动配置，不能随网络状况变化而自动调整，属于非自适应。
> * **动态路由 (Dynamic Routing)**：路由器间运行协议自动交换信息，能根据网络拓扑或流量变化自动调整，属于自适应。

---

### 4.12 填空题

路由器的结构可划分为两大部分：[填空1] 部分 (控制层面) 和 [填空2] 部分 (数据层面)。

**答案**：**路由选择；分组转发**

> **解析：**
>
>> 路由器的体系结构通常分为：
>>
>
> 1. **路由选择部分 (Routing selection)**：也称控制层面（Control Plane），负责运行路由协议（如 RIP, OSPF, BGP），计算路由表。
> 2. **分组转发部分 (Packet forwarding)**：也称数据层面（Data Plane），负责根据转发表将进入的分组从合适的端口转发出去（交换结构）。

---

### 4.13 综合题

给出 R2 的路由表，要求包括到达图中所有子网的路由，且路由表中的路由项尽可能少。
![4.13题](https://rain-private-qn.yuketang.cn/slide/43700295/cover1062_20251118095926.jpg?e=1768244419&token=IAM-gs8ue1pDIGwtR1CR0Zjdagg7Q2tn5G_1BqTmhmqa:WRxEiq8YcDBw3m9GpQVQay2TYek=)

**答案**：
**R2 路由表**

| 目的网络 (Destination) | 下一跳 (Next Hop) | 接口 (Interface) |
| ---------------------- | ----------------- | ---------------- |
| **153.14.5.0/24**      | 153.14.3.2        | S0               |
| **194.17.20.0/23**     | 194.17.24.2       | S1               |
| **194.17.20.128/25**   | - (直接交付)      | E0               |

*(注：如果考试要求极其严格，必须列出互连链路网段，可补充 `153.14.3.0/xx` 和 `194.17.24.0/xx` 为直连路由，但通常聚合题主要关注主机所在的子网)*

> **解析：**
> 题目要求“路由项尽可能少”，这意味着我们需要进行**路由聚合 (Route Aggregation/CIDR)**。
> **1. 分析 AS1 方向（向上，通过 S0 接口）**
>
> * 目标子网：`153.14.5.0/25` 和 `153.14.5.128/25`。
> * 二进制计算：
> * `5.0`   -> `00000101.0xxxxxxx`
> * `5.128` -> `00000101.1xxxxxxx`
> * 聚合结果：前 24 位相同，合并为 **`153.14.5.0/24`**。
> * 下一跳：图中 R1 的接口 IP 为 `153.14.3.2`。
>
> **2. 分析 AS2 方向（向下，通过 S1 接口）与 本地 E0**
>
> * 目标子网（在 R3 后）：`194.17.20.0/25` 和 `194.17.21.0/24`。
> * 本地直连子网（在 E0）：`194.17.20.128/25`。
> * **聚合计算**：
> * `20.0`   -> `00010100.0xxxxxxx` (R3)
> * `20.128` -> `00010100.1xxxxxxx` (本地 R2)
> * `21.0`   -> `00010101.xxxxxxxx` (R3)
> * 观察第三字节：`20` (`00010100`) 和 `21` (`00010101`) 的前 7 位相同。
> * 这意味着可以用 **`194.17.20.0/23`** 来覆盖 20.x 和 21.x 的所有地址。
> * **路由策略**：
> * 在路由表中添加一条聚合路由 **`194.17.20.0/23`** 指向 R3（下一跳 `194.17.24.2`）。
> * 同时保留本地直连路由 **`194.17.20.128/25`** 指向 E0。
> * **为什么这样行得通？** 根据**最长前缀匹配 (Longest Prefix Match)** 原则：
> * 去往 `194.17.20.130` (本地) 的包，匹配 /25（更长），走 E0。正确。
> * 去往 `194.17.20.10` (R3) 的包，不匹配 /25，匹配 /23，走 S1。正确。
> * 去往 `194.17.21.5` (R3) 的包，匹配 /23，走 S1。正确。
> * 这样只用 1 条静态路由就能覆盖 AS2 的两个网段，符合“路由项尽可能少”的要求。

---

### 4.14 单选题

某自治系统采用 RIP 协议，若该自治系统内的路由器 R1 收到其邻居路由器 R2 的距离矢量中包含信息 <net1, 16>，则可能得出的结论是

* A. R1 可以经过 R2 到达 net1，距离为 17
* B. R1 可以经过 R2 到达 net1，距离为 16
* C. R2 可以到达 net1，距离为 16
* D. R1 不能经过 R2 到达 net1

**答案**：**D**

> **解析：**
> RIP 协议使用“跳数”（Hop Count）来衡量到达目的网络的距离。
>
> * RIP 规定，一条路径最多包含 15 个路由器。
> * **距离 16 表示不可达**（即无穷大）。
> * 当 R2 告诉 R1 “我到 net1 的距离是 16”时，意味着 R2 自己无法到达 net1。
> * 因此，R1 肯定不能通过 R2 到达 net1（如果硬要算，距离会变成 16+1=17，依然不可达）。

---

### 4.16 填空题

网络如下图所示。假定路由器 R1 要把 H1 发往 128.1.2.16/29 的分组从接口 4 转发出去，而把 H2 发往 128.1.2.16/29 的分组从接口 3 转发出去，可以吗？ [填空1] (可以，不可以)。如果可以，路由器 R1 的转发表中应有网络前缀：[填空2] 和转发接口：[填空3]。如果不可以，填“无”。
![4.16题](https://rain-private-qn.yuketang.cn/slide/43700295/cover1060_20251125100000.jpg?e=1768244369&token=IAM-gs8ue1pDIGwtR1CR0Zjdagg7Q2tn5G_1BqTmhmqa:vGUzZTMIScf1bmtOKg_yt-cO81k=)
**答案**：**不可以；无；无**

> **解析：**
>
> 1. **IP 路由的核心原则**：标准的 IP 路由是**基于目的地址**（Destination-Based Routing）的。路由器只检查数据包头部中的“目的 IP 地址”，并在转发表中查找匹配的条目来决定下一跳。
>
> 2. **本题场景**：H1 和 H2 发送的分组，其**目的地址**都是 H3 所在的网络 `128.1.2.16/29`。
> 3. **冲突**：对于路由器 R1 来说，针对同一个目的网络 `128.1.2.16/29`，转发表中只能有一个最佳匹配的出口（或者在负载均衡/多路径路由时随机/轮询选择，但不能指定“H1 走 A，H2 走 B”）。
> 4. **结论**：普通的路由表无法根据**源地址**（H1 或 H2）来区分转发路径。要实现题目描述的功能，需要使用**策略路由 (Policy-Based Routing, PBR)**，但这是高级特性，不属于标准 IP 路由转发的范畴。因此在常规考题背景下，答案是**不可以**。

---

### 4.17 填空题

将零压缩的 IPv6 地址 123::1:2 写成原来的形式 [填空1]。

**答案**：**0123:0000:0000:0000:0000:0000:0001:0002**

> **解析：**
> IPv6 地址共 128 位，由 8 组 4 位十六进制数组成。
>
> * `::` 代表一连串的 `0`。
> * 现有部分：`123` (第 1 组) 和 `1:2` (最后 2 组)。共 3 组。
> * 缺失部分： 组。
> * 因此 `::` 展开为 5 组 `0000`。
> * 补全前导零：`123`  `0123`，`1`  `0001`，`2`  `0002`。
> * 结果：`0123:0000:0000:0000:0000:0000:0001:0002`。

---

### 4.18 多选题

当 NAT 路由器从专用网向公网转发一个 IP 数据报时，可能改变首部中的哪些字段。

* A. 版本
* B. 首部长度
* C. 服务类型
* D. 总长度
* E. 标识
* F. 标志
* G. 片偏移
* H. 生存时间 (TTL)
* I. 协议
* J. 首部校验和
* K. 源 IP 地址
* L. 目的 IP 地址

**答案**：**H, J, K**

> **解析：**
>
>> NAT（网络地址转换）路由器在转发时：
>>
>
> * **K. 源 IP 地址**：会将专用网（私有）IP 替换为公网 IP。
> * **H. 生存时间 (TTL)**：作为路由器，转发时 TTL 必须减 1。
> * **J. 首部校验和**：IP 地址和 TTL 都变了，校验和必须重算。
> * （注：目的 IP 地址通常在从公网回专用网时改变）。

---

# 第五章 运输层

### 5.1 单选题

操作系统给每一个进程都分配有唯一的进程号 ID，以下哪个不是网络通信使用端口号而不使用进程号 ID 标识应用进程的原因。

* A. 进程号不仅具有本地意义，而且是动态变化的
* B. 不同操作系统进程号格式不同
* C. 通信双方无法事先得知对方的 PID
* D. 进程号只具有本地意义

**答案**：**D**

> **解析：**
> 这是一个经典的概念题。不使用进程号（PID）而使用端口号的原因主要有：
>
> 1. **进程号不仅具有本地意义，而且是动态变化的**（对应 A、B）：操作系统启动不同进程的顺序不同，PID 就会不同；不同操作系统 PID 格式也不同。网络协议需要一种标准的、静态的标识符。
> 2. **通信双方无法事先得知对方的 PID**（对应 C）：客户端不知道服务器进程当前的 PID 是多少，但知道它监听的“熟知端口”（如 HTTP 80）。
>
> **关于 D**：虽然“进程号只具有本地意义”这句话本身是对的，但**端口号也只具有本地意义**（标识本地主机上的某个服务）。因此，D 选项描述的特性是两者共有的，**并不是**“弃用 PID 选用端口”的**区别性原因**。我们选用端口是因为它的**标准化**和**独立于 OS 进程管理**的特性。

---

### 5.2 单选题

下列关于 UDP 协议的叙述中，正确的是 ( )
I. UDP 是无连接的传输层协议，发送数据前不需要建立连接。
II. UDP 支持复用（多个应用进程通过不同端口发送数据）和分用（接收端根据端口号将数据交付给不同进程）。
III. UDP 虽然有校验和，但提供可靠传输。

* A. 仅 I
* B. 仅 I、II
* C. 仅 II、III
* D. I、II、III

**答案**：**B**

> **解析：**
>
> * **I 正确**：UDP 是无连接的传输层协议，发送数据前不需要建立连接。
> * **II 正确**：UDP 支持复用（多个应用进程通过不同端口发送数据）和分用（接收端根据端口号将数据交付给不同进程）。
> * **III 错误**：UDP 虽然有校验和（Checksum），但如果校验出错误，它通常只是简单地丢弃该数据报，**不提供重传机制**，因此它不能保障可靠数据传输。可靠传输是 TCP 的特性。
>
> 综上，仅 I 和 II 正确。

---

### 5.3 单选题

以下关于 IP 和 UDP 协议计算检验和说法，正确的是

* A. IP 协议和 UDP 协议都只计算首部检验和
* B. IP 协议和 UDP 协议都计算数据部分检验和
* C. IP 协议只计算数据部分检验和，UDP 协议计算首部检验和
* D. IP 协议只计算首部检验和，UDP 协议计算首部和数据部分检验和

**答案**：**D**

> **解析：**
>
> > * **IP 协议**：IP 数据报在网络层每经过一个路由器，TTL（生存时间）都会减 1，因此首部会发生变化。为了减少路由器的处理开销，IP 协议**只对首部计算检验和**，不检查数据部分。
> >
>
> * **UDP 协议**：UDP 提供端到端的传输，为了保证数据的完整性，UDP 的检验和覆盖**首部、伪首部以及数据部分**。

---

### 5.5 单选题

每一条 TCP 连接唯一地被通信两端的两个端点所确定，即 TCP 连接 ::=

* A. {socket1, socket2}
* B. {socket1, socket2} = {(IP1: port1), (IP2: port2)}
* C. {IP1, IP2}
* D. {port1, port2}

**答案**：**B**

> **解析：**
> TCP 连接是端到端的，由通信两端的**套接字（Socket）**唯一确定。
>
> * 套接字 = **(IP地址 : 端口号)**。
> * 因此，一条 TCP 连接可以表示为：**{ (IP1 : port1), (IP2 : port2) }**。
> * 选项 A 格式错误，将 IP 和端口分开组合了。
> * 选项 C 和 D 搭配错乱。

---

### 5.6 简答题

主机 A 向主机 B 连续发送了两个 TCP 报文段，其序号分别是 70 和 100。试问：
(1) 第一个报文段携带的数据有多少字节？
(2) 主机 B 收到第一个报文段后发回的确认中的确认号应当是多少？
(3) 如果 B 收到第二个报文段后发回的确认中的确认号是 180，试问第二个报文段的数据有多少字节？
(4) 如果第一个报文段丢失了，但第二个报文段到达了 B。B 在第二个报文段到达后向 A 发送的确认号是多少？

**答案**：
1. **30**
2. **100**
3. **80**
4. **70**

> **解析：**
>
> * **(1)**：第一个报文段序号 70，第二个报文段序号 100。说明第一个报文段携带的数据长度 = $100 - 70 = 30$ 字节。
> * **(2)**：B 收到第一个报文段（70-99）后，期待下一个字节是 100，因此确认号（Ack）为 **100**。
> * **(3)**：B 收到第二个报文段后确认号是 180。说明第二个报文段结束于 179。数据长度 = $180 - 100 = 80$ 字节。
> * **(4)**：TCP 使用**累积确认**。如果第一个报文段（70-99）丢失，即使收到了第二个（100-179），B 仍然处于等待 70 的状态。因此 B 发送的确认号依然是它期待的第一个字节号，即 **70**。

---

### 5.7 填空题

设 $\alpha = 0.1$。已知 TCP 的往返时延的当前值是 30ms。现在收到了三个接连的确认报文段... 试计算新的估计的往返时延值 $RTT_S$ 分别是 [填空1] ms，[填空2] ms，[填空3] ms。

**答案**：**29.6；29.84；29.26** (保留两位小数)

> **解析：**
> 计算公式：**新 $RTT_S$ = $(1 - \alpha) \times$ 旧 $RTT_S$ $+ \alpha \times$ 新 $RTT$ 样本**
> $\alpha = 0.1$，所以公式为：$RTT_S = 0.9 \times Old + 0.1 \times Sample$。
>
> 1. **第一个样本 26ms**：
>    $RTT_1 = 0.9 \times 30 + 0.1 \times 26 = 27 + 2.6 = 29.6 \text{ ms}$
> 2. **第二个样本 32ms**（使用上一步更新后的 RTT 作为旧值）：
>    $RTT_2 = 0.9 \times 29.6 + 0.1 \times 32 = 26.64 + 3.2 = 29.84 \text{ ms}$
> 3. **第三个样本 24ms**（使用上一步更新后的 RTT 作为旧值）：
>    $RTT_3 = 0.9 \times 29.84 + 0.1 \times 24 = 26.856 + 2.4 = 29.256 \approx 29.26 \text{ ms}$

---

### 8 (14年考研33题)  单选题

在 OSI 参考模型中，直接为会话层提供服务的是 ()

* A. 应用层
* B. 表示层
* C. 传输层
* D. 网络层

**答案**：**C**

> **解析：**
> OSI 模型遵循下层为上层服务的原则。
>
> * 第 7 层：应用层
> * 第 6 层：表示层
> * **第 5 层：会话层**
> * **第 4 层：传输层**
>
> 因此，**传输层**直接为会话层提供服务。

---


# 第六章 应用层

### 6.1 填空题

互联网采用了 [填空1] 结构的命名方法。并使用 [填空2] 式的域名系统 DNS。域名系统 DNS 只能进行域名到 IP 地址的解析吗？ [填空3] (是、否)

**答案**：**层次（或 层次树状）；分布；否**

> **解析：**
>
> * 互联网采用**层次树状 (Hierarchical)** 命名空间（如 .com）。
> * DNS 系统是**分布式 (Distributed)** 数据库系统，没有一台机器存储所有域名信息。
> * DNS 不仅解析域名到 IP（A记录），还可以查询邮件服务器别名（MX记录）、主机别名（CNAME记录）等，因此填**否**。

---

### 6.2 单选题

以下哪种类型的域名服务器又称为默认域名服务器

**答案**：**D**

> **解析：**
>
> * **本地域名服务器 (Local Name Server)**：当一个主机发出 DNS 查询请求时，这个查询请求报文首先是发送给本地域名服务器的。因此，本地域名服务器也称为**默认域名服务器**。
> * 根域名服务器、顶级域名服务器和权限域名服务器是 DNS 层次结构中的高层服务器，用于在本地解析失败时进行迭代或递归查询。

---

### 6.3 填空题

当主机进行域名查询时，主机向本地域名服务器的查询一般都是采用 [填空1] 查询方式，本地域名服务器向根域名服务器的查询通常是采用 [填空2] 查询方式。

**答案**：**递归；迭代**

> **解析：**
>
> * **主机  本地域名服务器**：采用**递归查询 (Recursive Query)**。即“你（本地服务器）帮我查，我只要结果”。如果本地服务器不知道，它负责去问别人，最后把结果回传给主机。
> * **本地域名服务器  根域名服务器**：采用**迭代查询 (Iterative Query)**。即“你（根服务器）告诉我下一步该问谁”，根服务器不负责帮本地服务器跑腿，只返回下一级服务器的地址（如 .com 服务器），让本地服务器自己去问。

---

### 6.4 填空题

在进行文件传输时，FTP 的客户进程先与服务器进程之间建立 TCP 连接，即 [填空1] 连接，服务器进程熟知端口号为 [填空2]。接着，服务器进程与客户进程所提供的端口号建立 [填空3] 连接，此时服务器进程的熟知端口号为 [填空4]。

**答案**：**控制；21；数据；20**

> **解析：**
> FTP 使用两个并行的 TCP 连接：
>
> 1. **控制连接 (Control Connection)**：用于传输命令和响应（如登录、目录变更）。服务器端使用熟知端口 **21**。该连接在整个会话期间保持打开。
> 2. **数据连接 (Data Connection)**：用于实际传输文件内容。在**主动模式**（Port Mode）下，服务器使用熟知端口 **20** 主动连接客户端的数据端口。

---

### 6.5 多选题

一个资源的 URL 表示为 http://www.ctrip.com:80/index.htm 以下选项中，哪些是其省略后的有效表示

* A. http://www.ctrip.com:80
* B. http://www.ctrip.com
* C. www.ctrip.com
* D. ctrip.com

**答案**：**A, B**

> **解析：**
> URL 的标准格式为 `协议://主机:端口/路径`。
>
> * **端口省略**：HTTP 协议的默认端口是 **80**，可以省略。
> * **路径省略**：如果访问的是根目录下的默认文件（如 `index.htm` 或 `index.html`），路径通常可以省略（或仅保留 `/`）。
>
> 选项分析：
>
> * **A** `http://www.ctrip.com:80`：省略了文件名，指向默认主页，有效。
> * **B** `http://www.ctrip.com`：省略了端口和文件名，指向默认主页，有效。
> * C `www.ctrip.com` 和 D `ctrip.com`：虽然在现代浏览器地址栏输入后会自动跳转，但从严格定义上讲，它们是**域名**，缺少 URL 必须的**协议部分**（scheme，即 `http://`），因此不是标准的 URL 表示。

---

### 6.6 单选题

某浏览器发出的 HTTP 请求报文如下：

```
GET /index.html HTTP/1.1
Host: www.test.edu.cn
Connection: Close
Cookie: 123456
```

下列叙述中，错误的是

* A. 该浏览器请求浏览 index.html
* B. Host 字段指明了资源所在的主机
* C. Connection 字段表示使用持续连接
* D. Cookie 字段是浏览器发送给服务器的身份标识

**答案**：**C**

> **解析：**
>
> * 报文内容：`GET /index.html HTTP/1.1`，`Host: www.test.edu.cn`，`Connection: Close`，`Cookie: 123456`。
> * A 正确：`GET /index.html` 表示请求浏览 `index.html`。
> * B 正确：`Host` 字段指明了资源所在的主机。
> * **C 错误**：报文中 `Connection: Close` 明确表示使用**非持续连接**（Non-persistent），即服务器发送完响应后会立即关闭 TCP 连接。如果是持续连接，应为 `Keep-Alive`。
> * D 正确：`Cookie: 123456` 是浏览器发送给服务器的，说明之前浏览器访问过该网站，服务器给它颁发过 Cookie，现在浏览器再次访问时带上了这个身份标识。

---

### 6.7 多选题

一台连接到互联网的主机，至少要进行以下哪些配置。

* A. 物理地址
* B. IP 地址
* C. 默认网关
* D. 域名服务器

**答案**：**B, C, D**

> **解析：**
> 要使主机能正常访问互联网（浏览网页等），通常需要配置 IP 四要素中的三个（MAC通常是固化的）：
>
> * **B. IP 地址**：主机的唯一标识。
> * **C. 默认网关**：用于将数据包发送到本网段之外（即访问互联网）。
> * **D. 域名服务器 (DNS)**：用于将网址（域名）解析为 IP 地址。
> * A. 物理地址 (MAC) 是网卡出厂时烧录的，通常不需要用户手动配置。
